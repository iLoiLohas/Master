<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>EALib: integerES.cpp</title>
<script type="text/javaScript" src="search/search.js"></script>
<link href="../css/main.css" rel="stylesheet" type="text/css"/>
</head>
<body id="type-b">

<div id="wrap">
<div id="header">
<div id="site-name">Shark Machine Learning Library</div>
<div id="poweredby">
<img style="width: 95%;" src="../images/SharkLogo.png"/>
</div>		
  
<ul id="nav">
  <li class="first"><a href="../index.html">About Shark</a></li>
  <li><a href="#">Sourceforge</a>
  
  <ul>
    <li class="first"><a href="http://shark-project.sourceforge.net">Project Summary</a></li>
    <li><a href="http://sourceforge.net/projects/shark-project/files/">Downloads</a></li>
    <li><a href="http://sourceforge.net/projects/shark-project/develop">Subversion Repository</a></li>
  </ul>
  
</li>
<li class="first"><a href="../GettingStarted.html">Getting Started</a>
<li class="first"><a href="../Tutorials.html">Tutorials</a>
<li class="first"><a href="../FAQ.html">FAQ</a>

<li class="first"><a href="#">Main Modules</a>
<ul>
  <li class="first"><a href="../ReClaM/index.html">ReClaM</a>
  <li class="first"><a href="../EALib/index.html">EALib</a>
  <li class="first"><a href="../MOO-EALib/index.html">MOO-EALib</a>
  <li class="first"><a href="../Fuzzy/index.html">Fuzzy</a>
</ul>
</li>
<li class="first"><a href="#">Tools</a>
<ul>
  <li class="first"><a href="../Mixture/index.html">Mixture</a>
  <li><a href="../Array/index.html">Array</a>
  <li><a href="../Rng/index.html">Rng</a>
  <li><a href="../LinAlg/index.html">LinAlg</a>
  <li class="last"><a href="../FileUtil/index.html">FileUtil</a>		    
</ul>
</li>
</ul>
</div>

<!--<div id="header">
<div id="site-name">Shark Machine Learning Library</div>
  <ul id="nav">
    <li><a href="../index.html"><span>Shark&nbsp;Main&nbsp;Page</span></a></li>
    <li><a href="../Array/index.html"><span>Array</span></a></li>
    <li><a href="../Rng/index.html"><span>Rng</span></a></li>
    <li><a href="../LinAlg/index.html"><span>LinAlg</span></a></li>
    <li><a href="../FileUtil/index.html"><span>FileUtil</span></a></li>
    <li><a href="../EALib/index.html"><span>EALib</span></a></li>
    <li><a href="../MOO-EALib/index.html"><span>MOO-EALib</span></a></li>
    <li class="active"><a href="../ReClaM/index.html"><span>ReClaM</span></a></li>
    <li><a href="../Fuzzy/index.html"><span>Fuzzy</span></a></li>
    <li><a href="../Mixture/index.html"><span>Mixture</span></a></li>
    <li><a href="../tutorials/index.html"><span>Tutorials</span></a></li>
    <li><a href="../faq/index.html"><span>FAQ</span></a></li>
  </ul>
 </div> -->
<!-- Generated by Doxygen 1.7.3 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>integerES.cpp</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment">
<span class="comment">//</span>
<span class="comment">// Evolution strategy for solving nonlinear integer problems according to</span>
<span class="comment">//     Rudolph, G. (1994). An evolutionary algorithm for integer</span>
<span class="comment">//     programming. In PPSN III, LNCS 866 Springer.</span>
<span class="comment">//</span>
<span class="preprocessor">#include &lt;SharkDefs.h&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="_population_8h.html" title="Base class for populations of individuals in an evolutionary algorithm.">EALib/Population.h</a>&gt;</span>

<span class="comment">//=======================================================================</span>
<span class="comment">//</span>
<span class="comment">// fitness function: x&#39; x -&gt; min according to</span>
<span class="comment">//     Schwefel, H.P. (1977). Numerische Optimierung von</span>
<span class="comment">//     Computer-Modellen mittels der Evolutionsstrategie.</span>
<span class="comment">//     Birkhaeuser.</span>
<span class="comment">//</span>
<span class="keywordtype">double</span> problem_1_1(<span class="keyword">const</span> std::vector&lt; int &gt;&amp; x)
{
    <span class="keywordtype">unsigned</span> i;
    <span class="keywordtype">double</span>   sum = 0;

    <span class="keywordflow">for</span> (i = 0; i &lt; x.size(); ++i)
        sum += Shark::sqr(x[ i ]);

    <span class="keywordflow">return</span> sum;
}

<span class="comment">//=======================================================================</span>
<span class="comment">//</span>
<span class="comment">// main program</span>
<span class="comment">//</span>
<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
{
    <span class="comment">//</span>
    <span class="comment">// constants</span>
    <span class="comment">//</span>
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Mu           = 30;
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Lambda       = 100;
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Dimension    = 30;
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Iterations   = 150;
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a name="_a0"></a><a class="code" href="class_interval.html" title="Interval [a, b] of the real numbers.">Interval</a>     = 5;
    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NStepSizes   = 1;

    <span class="keyword">const</span> <span class="keywordtype">int</span>      MinInit      = -1000;
    <span class="keyword">const</span> <span class="keywordtype">int</span>      MaxInit      = + 1000;
    <span class="keyword">const</span> <span class="keywordtype">double</span>   StepSizeInit = 1000 / 3.;

    <span class="keyword">const</span> <span class="keywordtype">bool</span>     PlusStrategy = <span class="keyword">false</span>;

    <span class="keywordtype">unsigned</span>       i, t;

    <span class="comment">//</span>
    <span class="comment">// initialize random number generator</span>
    <span class="comment">//</span>
    Rng::seed(argc &gt; 1 ? atoi(argv[ 1 ]) : 1234);

    <span class="comment">//</span>
    <span class="comment">// define populations</span>
    <span class="comment">//</span>
    <a name="_a1"></a><a class="code" href="class_population.html" title="Base class for populations of individuals in an evolutionary algorithm.">Population</a> parents(Mu,     <a name="_a2"></a><a class="code" href="class_chromosome_t_3_01int_01_4.html" title="chromosome based on integers">ChromosomeT&lt; int    &gt;</a>(Dimension),
                       <a name="_a3"></a><a class="code" href="class_chromosome_t_3_01double_01_4.html" title="chromosome based on double numbers">ChromosomeT&lt; double &gt;</a>(NStepSizes));
    <a class="code" href="class_population.html" title="Base class for populations of individuals in an evolutionary algorithm.">Population</a> offsprings(Lambda, <a class="code" href="class_chromosome_t_3_01int_01_4.html" title="chromosome based on integers">ChromosomeT&lt; int    &gt;</a>(Dimension),
                          <a class="code" href="class_chromosome_t_3_01double_01_4.html" title="chromosome based on double numbers">ChromosomeT&lt; double &gt;</a>(NStepSizes));

    <span class="comment">//</span>
    <span class="comment">// minimization task</span>
    <span class="comment">//</span>
    parents   .setMinimize();
    offsprings.setMinimize();

    <span class="comment">//</span>
    <span class="comment">// initialize parent population</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span> (i = 0; i &lt; parents.size(); ++i) {
        <span class="keyword">dynamic_cast&lt;</span> <a class="code" href="class_chromosome_t_3_01int_01_4.html" title="chromosome based on integers">ChromosomeT&lt; int &gt;</a>&amp; <span class="keyword">&gt;</span>
        (parents[ i ][ 0 ]).initialize(MinInit, MaxInit);
        <span class="keyword">dynamic_cast&lt;</span> <a class="code" href="class_chromosome_t_3_01double_01_4.html" title="chromosome based on double numbers">ChromosomeT&lt; double &gt;</a>&amp; <span class="keyword">&gt;</span>
        (parents[ i ][ 1 ]).initialize(StepSizeInit, StepSizeInit);
    }

    <span class="comment">//</span>
    <span class="comment">// selection parameters (number of elitists)</span>
    <span class="comment">//</span>
    <span class="keywordtype">unsigned</span> numElitists = PlusStrategy ? Mu : 0;

    <span class="comment">//</span>
    <span class="comment">// standard deviations for mutation of the step size</span>
    <span class="comment">//</span>
    <span class="keywordtype">double</span>   tau = 1. / sqrt(<span class="keywordtype">double</span>(Dimension));

    <span class="comment">//</span>
    <span class="comment">// evaluate parents (only needed for elitist strategy)</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> (PlusStrategy)
        <span class="keywordflow">for</span> (i = 0; i &lt; parents.size(); ++i)
            parents[ i ].setFitness(problem_1_1(<span class="keyword">dynamic_cast&lt;</span> std::vector&lt; int &gt;&amp; <span class="keyword">&gt;</span>(parents[ i ][ 0 ])));

    <span class="comment">//</span>
    <span class="comment">// iterate</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span> (t = 0; t &lt; Iterations; ++t) {
        <span class="comment">//</span>
        <span class="comment">// generate new offsprings</span>
        <span class="comment">//</span>
        <span class="keywordflow">for</span> (i = 0; i &lt; offsprings.size(); ++i) {
            <span class="comment">//</span>
            <span class="comment">// select two random parents</span>
            <span class="comment">//</span>
            <a name="_a4"></a><a class="code" href="class_individual.html" title="Base class for individuals in a population.">Individual</a>&amp; mom = parents.random();
            <a class="code" href="class_individual.html" title="Base class for individuals in a population.">Individual</a>&amp; dad = parents.random();

            <span class="comment">//</span>
            <span class="comment">// define temporary references for convenience</span>
            <span class="comment">//</span>
            <a class="code" href="class_chromosome_t_3_01int_01_4.html" title="chromosome based on integers">ChromosomeT&lt; int &gt;</a>&amp; objvar =
                <span class="keyword">dynamic_cast&lt;</span> <a class="code" href="class_chromosome_t_3_01int_01_4.html" title="chromosome based on integers">ChromosomeT&lt; int &gt;</a>&amp; <span class="keyword">&gt;</span>(offsprings[ i ][ 0 ]);
            <a class="code" href="class_chromosome_t_3_01double_01_4.html" title="chromosome based on double numbers">ChromosomeT&lt; double &gt;</a>&amp; stepSize =
                <span class="keyword">dynamic_cast&lt;</span> <a class="code" href="class_chromosome_t_3_01double_01_4.html" title="chromosome based on double numbers">ChromosomeT&lt; double &gt;</a>&amp; <span class="keyword">&gt;</span>(offsprings[ i ][ 1 ]);

            <span class="comment">//</span>
            <span class="comment">// recombine object variables discrete, step sizes intermediate</span>
            <span class="comment">//</span>
            objvar  .<a name="a5"></a><a class="code" href="class_chromosome_t__base.html#aa4f2009c8ab28b60869a2402cb6286b8">recombineDiscrete</a>(mom[ 0 ], dad[ 0 ]);
            stepSize.recombineIntermediate(mom[ 1 ], dad[ 1 ]);

            <span class="comment">//</span>
            <span class="comment">// mutate object variables by adding the difference of two</span>
            <span class="comment">// independent geometrically distributed random numbers</span>
            <span class="comment">// to each component,</span>
            <span class="comment">// mutate step sizes lognormally distributed</span>
            <span class="comment">//</span>
            stepSize.mutateLogNormal(tau,  0);
            <span class="comment">// step Size less than 1 is not sensible</span>
            stepSize.cutOff(1, MaxInit);
            objvar  .<a name="a6"></a><a class="code" href="class_chromosome_t_3_01int_01_4.html#a2b77029b49a220d68771aa12280aabd3">mutateDiffGeom</a>(stepSize, <span class="keyword">true</span>);
        }

        <span class="comment">//</span>
        <span class="comment">// evaluate objective function (parameters in chromosome #0)</span>
        <span class="comment">//</span>
        <span class="keywordflow">for</span> (i = 0; i &lt; offsprings.size(); ++i)
            offsprings[ i ].setFitness(problem_1_1(<span class="keyword">dynamic_cast&lt;</span> std::vector&lt; int &gt;&amp; <span class="keyword">&gt;</span>(offsprings[ i ][ 0 ])));

        <span class="comment">//</span>
        <span class="comment">// select (mu,lambda) or (mu+lambda)</span>
        <span class="comment">//</span>
        parents.selectMuLambda(offsprings, numElitists);

        <span class="comment">//</span>
        <span class="comment">// print out best value found so far</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> (t % Interval == 0)
            std::cout &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;\tbest value = &quot;</span>
            &lt;&lt; parents.best().fitnessValue() &lt;&lt; std::endl;
    }

    <span class="comment">// lines below are for self-testing this example, please ignore</span>
    <span class="keywordflow">if</span>(parents.best().fitnessValue()==0) exit(EXIT_SUCCESS);
    <span class="keywordflow">else</span> exit(EXIT_FAILURE);
}

</pre></div> </div>
</div>
</div>
</div>
</body></html>
