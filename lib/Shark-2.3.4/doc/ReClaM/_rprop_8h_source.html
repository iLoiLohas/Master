<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ReClaM: Rprop.h Source File</title>
<script type="text/javaScript" src="search/search.js"></script>
<link href="../css/main.css" rel="stylesheet" type="text/css"/>
</head>
<body id="type-b">

<div id="wrap">
<div id="header">
<div id="site-name">Shark Machine Learning Library</div>
<div id="poweredby">
<img style="width: 95%;" src="../images/SharkLogo.png"/>
</div>		
  
<ul id="nav">
  <li class="first"><a href="../index.html">About Shark</a></li>
  <li><a href="#">Sourceforge</a>
  
  <ul>
    <li class="first"><a href="http://shark-project.sourceforge.net">Project Summary</a></li>
    <li><a href="http://sourceforge.net/projects/shark-project/files/">Downloads</a></li>
    <li><a href="http://sourceforge.net/projects/shark-project/develop">Subversion Repository</a></li>
  </ul>
  
</li>
<li class="first"><a href="../GettingStarted.html">Getting Started</a>
<li class="first"><a href="../Tutorials.html">Tutorials</a>
<li class="first"><a href="../FAQ.html">FAQ</a>

<li class="first"><a href="#">Main Modules</a>
<ul>
  <li class="first"><a href="../ReClaM/index.html">ReClaM</a>
  <li class="first"><a href="../EALib/index.html">EALib</a>
  <li class="first"><a href="../MOO-EALib/index.html">MOO-EALib</a>
  <li class="first"><a href="../Fuzzy/index.html">Fuzzy</a>
</ul>
</li>
<li class="first"><a href="#">Tools</a>
<ul>
  <li class="first"><a href="../Mixture/index.html">Mixture</a>
  <li><a href="../Array/index.html">Array</a>
  <li><a href="../Rng/index.html">Rng</a>
  <li><a href="../LinAlg/index.html">LinAlg</a>
  <li class="last"><a href="../FileUtil/index.html">FileUtil</a>		    
</ul>
</li>
</ul>
</div>

<!--<div id="header">
<div id="site-name">Shark Machine Learning Library</div>
  <ul id="nav">
    <li><a href="../index.html"><span>Shark&nbsp;Main&nbsp;Page</span></a></li>
    <li><a href="../Array/index.html"><span>Array</span></a></li>
    <li><a href="../Rng/index.html"><span>Rng</span></a></li>
    <li><a href="../LinAlg/index.html"><span>LinAlg</span></a></li>
    <li><a href="../FileUtil/index.html"><span>FileUtil</span></a></li>
    <li><a href="../EALib/index.html"><span>EALib</span></a></li>
    <li><a href="../MOO-EALib/index.html"><span>MOO-EALib</span></a></li>
    <li class="active"><a href="../ReClaM/index.html"><span>ReClaM</span></a></li>
    <li><a href="../Fuzzy/index.html"><span>Fuzzy</span></a></li>
    <li><a href="../Mixture/index.html"><span>Mixture</span></a></li>
    <li><a href="../tutorials/index.html"><span>Tutorials</span></a></li>
    <li><a href="../faq/index.html"><span>FAQ</span></a></li>
  </ul>
 </div> -->
<!-- Generated by Doxygen 1.7.3 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>Rprop.h</h1>  </div>
</div>
<div class="contents">
<a href="_rprop_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//===========================================================================</span>
<a name="l00055"></a>00055 <span class="comment"></span><span class="comment">//===========================================================================</span>
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="_rprop_8h.html#a9f918755b601cf4bffca775992e6fb90">00057</a> <span class="preprocessor">#define NOMINMAX</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00059"></a>00059 <span class="preprocessor">#ifndef RPROP_H</span>
<a name="l00060"></a><a class="code" href="_rprop_8h.html#acece96e73f1002f08ff9c91f4cd36836">00060</a> <span class="preprocessor"></span><span class="preprocessor">#define RPROP_H</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &lt;SharkDefs.h&gt;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &lt;Array/Array.h&gt;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &lt;Array/ArrayOp.h&gt;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &lt;ReClaM/Optimizer.h&gt;</span>
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="comment">//===========================================================================</span>
<a name="l00145"></a><a class="code" href="class_rprop_plus.html">00145</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="class_rprop_plus.html" title="This class offers methods for the usage of the Resilient-Backpropagation-algorithm with weight-backtr...">RpropPlus</a> : <span class="keyword">public</span> <a class="code" href="class_optimizer.html" title="Base class of all optimizers.">Optimizer</a>
<a name="l00146"></a>00146 {
<a name="l00147"></a>00147 <span class="keyword">public</span>:
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     <span class="comment">//===========================================================================</span>
<a name="l00175"></a><a class="code" href="class_rprop_plus.html#a9dcbaea10da1a0831c8b704136b41de9">00175</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_rprop_plus.html#a9dcbaea10da1a0831c8b704136b41de9" title="Initializes the optimizer with default parameters.">init</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model)
<a name="l00176"></a>00176     {
<a name="l00177"></a>00177         <a class="code" href="class_rprop_plus.html#a83620f5a9f1b058c5c11eeab86ccd6c8" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(model);
<a name="l00178"></a>00178     }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180     <span class="comment">//===========================================================================</span>
<a name="l00209"></a><a class="code" href="class_rprop_plus.html#a83620f5a9f1b058c5c11eeab86ccd6c8">00209</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_rprop_plus.html#a83620f5a9f1b058c5c11eeab86ccd6c8" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model, <span class="keywordtype">double</span> npP = 1.2, <span class="keywordtype">double</span> nmP = 0.5, <span class="keywordtype">double</span> dMaxP = 1e100, <span class="keywordtype">double</span> dMinP = 0.0, <span class="keywordtype">double</span> delta0P = 0.01)
<a name="l00210"></a>00210     {
<a name="l00211"></a>00211         <a class="code" href="class_rprop_plus.html#a838e5a175558bac7de19caf0a80cef85" title="The increase factor , set to 1.2 by default.">np</a>      = npP;
<a name="l00212"></a>00212         <a class="code" href="class_rprop_plus.html#af3aaf052adb9ac69fd5d6aeee9aaa343" title="The decrease factor , set to 0.5 by default.">nm</a>      = nmP;
<a name="l00213"></a>00213         <a class="code" href="class_rprop_plus.html#a14118583c4dd8b2432554842c9e0a429" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>    = dMaxP;
<a name="l00214"></a>00214         <a class="code" href="class_rprop_plus.html#a88b6463d3beb3445a411eb38acc48c5b" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>    = dMinP;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216         <a class="code" href="class_rprop_plus.html#a8fd2bcbac961e277ebe871974152edd3" title="The final update values for all weights.">deltaw</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00217"></a>00217         <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00218"></a>00218         <a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641" title="The last error gradient.">dedwOld</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00219"></a>00219 
<a name="l00220"></a>00220         <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>   = delta0P;
<a name="l00221"></a>00221         <a class="code" href="class_rprop_plus.html#a8fd2bcbac961e277ebe871974152edd3" title="The final update values for all weights.">deltaw</a>  = 0;
<a name="l00222"></a>00222         <a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641" title="The last error gradient.">dedwOld</a> = 0;
<a name="l00223"></a>00223     }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225     <span class="comment">//===========================================================================</span>
<a name="l00247"></a><a class="code" href="class_rprop_plus.html#a3bf152da8accf73365f64e5de89ffcb9">00247</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_rprop_plus.html#a83620f5a9f1b058c5c11eeab86ccd6c8" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model, <span class="keyword">const</span> Array&lt;double&gt;&amp; delta0P, <span class="keywordtype">double</span> npP = 1.2, <span class="keywordtype">double</span> nmP = 0.5, <span class="keywordtype">double</span> dMaxP = 1e100, <span class="keywordtype">double</span> dMinP = 0.0)
<a name="l00248"></a>00248     {
<a name="l00249"></a>00249         <a class="code" href="class_rprop_plus.html#a838e5a175558bac7de19caf0a80cef85" title="The increase factor , set to 1.2 by default.">np</a>      = npP;
<a name="l00250"></a>00250         <a class="code" href="class_rprop_plus.html#af3aaf052adb9ac69fd5d6aeee9aaa343" title="The decrease factor , set to 0.5 by default.">nm</a>      = nmP;
<a name="l00251"></a>00251         <a class="code" href="class_rprop_plus.html#a14118583c4dd8b2432554842c9e0a429" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>    = dMaxP;
<a name="l00252"></a>00252         <a class="code" href="class_rprop_plus.html#a88b6463d3beb3445a411eb38acc48c5b" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>    = dMinP;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254         <a class="code" href="class_rprop_plus.html#a8fd2bcbac961e277ebe871974152edd3" title="The final update values for all weights.">deltaw</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00255"></a>00255         <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00256"></a>00256         <a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641" title="The last error gradient.">dedwOld</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00257"></a>00257 
<a name="l00258"></a>00258         <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>   = delta0P;
<a name="l00259"></a>00259         <a class="code" href="class_rprop_plus.html#a8fd2bcbac961e277ebe871974152edd3" title="The final update values for all weights.">deltaw</a>  = 0.0;
<a name="l00260"></a>00260         <a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641" title="The last error gradient.">dedwOld</a> = 0.0;
<a name="l00261"></a>00261     }
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <span class="comment">//===========================================================================</span>
<a name="l00289"></a><a class="code" href="class_rprop_plus.html#ac5b3bdf7d7d70b93dbe0be796f92505d">00289</a> <span class="comment"></span>    <span class="keywordtype">double</span> <a class="code" href="class_rprop_plus.html#ac5b3bdf7d7d70b93dbe0be796f92505d" title="Performs a run of the Rprop algorithm.">optimize</a>(
<a name="l00290"></a>00290         <a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model,
<a name="l00291"></a>00291         <a class="code" href="class_error_function.html" title="Base class of all error measures.">ErrorFunction</a>&amp; errorfunction,
<a name="l00292"></a>00292         <span class="keyword">const</span> Array&lt;double&gt;&amp; input,
<a name="l00293"></a>00293         <span class="keyword">const</span> Array&lt;double&gt;&amp; target)
<a name="l00294"></a>00294     {
<a name="l00295"></a>00295         Array&lt;double&gt; dedw(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00296"></a>00296         <span class="keywordtype">double</span> currentError = errorfunction.<a class="code" href="class_error_function.html#a1d7581c61746f51aa96f74fc17a30d55" title="Calculates the field derivative, the derivative of the error  with respect to the model parameters...">errorDerivative</a>(model, input, target, dedw);
<a name="l00297"></a>00297 
<a name="l00298"></a>00298         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a> = 0; <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a> &lt; model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>(); <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>++)
<a name="l00299"></a>00299         {
<a name="l00300"></a>00300             <span class="keywordtype">double</span> p = model.<a class="code" href="class_model.html#a8e8eca8ae3e8e53ca0aa6a1731e1f0f6" title="Returns a specific model parameter.">getParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>);
<a name="l00301"></a>00301             <span class="keywordflow">if</span> (dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * <a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) &gt; 0)
<a name="l00302"></a>00302             {
<a name="l00303"></a>00303                 <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = Shark::min(<a class="code" href="class_rprop_plus.html#a14118583c4dd8b2432554842c9e0a429" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>, <a class="code" href="class_rprop_plus.html#a838e5a175558bac7de19caf0a80cef85" title="The increase factor , set to 1.2 by default.">np</a> * <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00304"></a>00304                 <a class="code" href="class_rprop_plus.html#a8fd2bcbac961e277ebe871974152edd3" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * -<a class="code" href="class_rprop_plus.html#ab1a34de06339202215a8dbd80bce4fd0" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00305"></a>00305                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p + <a class="code" href="class_rprop_plus.html#a8fd2bcbac961e277ebe871974152edd3" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00306"></a>00306                 <a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>);
<a name="l00307"></a>00307             }
<a name="l00308"></a>00308             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * <a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) &lt; 0)
<a name="l00309"></a>00309             {
<a name="l00310"></a>00310                 <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = Shark::max(<a class="code" href="class_rprop_plus.html#a88b6463d3beb3445a411eb38acc48c5b" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>, <a class="code" href="class_rprop_plus.html#af3aaf052adb9ac69fd5d6aeee9aaa343" title="The decrease factor , set to 0.5 by default.">nm</a> * <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00311"></a>00311                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p - <a class="code" href="class_rprop_plus.html#a8fd2bcbac961e277ebe871974152edd3" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00312"></a>00312                 <a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = 0;
<a name="l00313"></a>00313             }
<a name="l00314"></a>00314             <span class="keywordflow">else</span>
<a name="l00315"></a>00315             {
<a name="l00316"></a>00316                 <a class="code" href="class_rprop_plus.html#a8fd2bcbac961e277ebe871974152edd3" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * -<a class="code" href="class_rprop_plus.html#ab1a34de06339202215a8dbd80bce4fd0" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00317"></a>00317                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p + <a class="code" href="class_rprop_plus.html#a8fd2bcbac961e277ebe871974152edd3" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00318"></a>00318                 <a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>);
<a name="l00319"></a>00319             }
<a name="l00320"></a>00320             <span class="keywordflow">if</span> (! model.<a class="code" href="class_model.html#a49d9dae98bd077daf18e7f96f2afcedc" title="check whether the parameters define a feasible model">isFeasible</a>())
<a name="l00321"></a>00321             {
<a name="l00322"></a>00322                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p);
<a name="l00323"></a>00323                 <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) *= <a class="code" href="class_rprop_plus.html#af3aaf052adb9ac69fd5d6aeee9aaa343" title="The decrease factor , set to 0.5 by default.">nm</a>;
<a name="l00324"></a>00324                 <a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = 0.0;
<a name="l00325"></a>00325             }
<a name="l00326"></a>00326         }
<a name="l00327"></a>00327         <span class="keywordflow">return</span> currentError;
<a name="l00328"></a>00328     }
<a name="l00329"></a>00329 
<a name="l00331"></a><a class="code" href="class_rprop_plus.html#a3d4dad5b81815e323e05b6d5db4c4131">00331</a>     <span class="keywordtype">double</span> <a class="code" href="class_rprop_plus.html#a3d4dad5b81815e323e05b6d5db4c4131" title="return the maximal step size component">maxDelta</a>()<span class="keyword"> const</span>
<a name="l00332"></a>00332 <span class="keyword">    </span>{
<a name="l00333"></a>00333         <span class="keywordflow">return</span> maxElement(<a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>);
<a name="l00334"></a>00334     }
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 <span class="keyword">protected</span>:
<a name="l00337"></a>00337 
<a name="l00338"></a>00338     <span class="comment">//===========================================================================</span>
<a name="l00355"></a><a class="code" href="class_rprop_plus.html#ab1a34de06339202215a8dbd80bce4fd0">00355</a> <span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="class_rprop_plus.html#ab1a34de06339202215a8dbd80bce4fd0" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(<span class="keywordtype">double</span> x)
<a name="l00356"></a>00356     {
<a name="l00357"></a>00357         <span class="keywordflow">if</span> (x &gt; 0) <span class="keywordflow">return</span> 1; <span class="keywordflow">if</span> (x &lt; 0) <span class="keywordflow">return</span> -1; <span class="keywordflow">return</span> 0;
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359 
<a name="l00361"></a><a class="code" href="class_rprop_plus.html#a838e5a175558bac7de19caf0a80cef85">00361</a>     <span class="keywordtype">double</span> <a class="code" href="class_rprop_plus.html#a838e5a175558bac7de19caf0a80cef85" title="The increase factor , set to 1.2 by default.">np</a>;
<a name="l00362"></a>00362 
<a name="l00364"></a><a class="code" href="class_rprop_plus.html#af3aaf052adb9ac69fd5d6aeee9aaa343">00364</a>     <span class="keywordtype">double</span> <a class="code" href="class_rprop_plus.html#af3aaf052adb9ac69fd5d6aeee9aaa343" title="The decrease factor , set to 0.5 by default.">nm</a>;
<a name="l00365"></a>00365 
<a name="l00367"></a><a class="code" href="class_rprop_plus.html#a14118583c4dd8b2432554842c9e0a429">00367</a>     <span class="keywordtype">double</span> <a class="code" href="class_rprop_plus.html#a14118583c4dd8b2432554842c9e0a429" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>;
<a name="l00368"></a>00368 
<a name="l00370"></a><a class="code" href="class_rprop_plus.html#a88b6463d3beb3445a411eb38acc48c5b">00370</a>     <span class="keywordtype">double</span> <a class="code" href="class_rprop_plus.html#a88b6463d3beb3445a411eb38acc48c5b" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>;
<a name="l00371"></a>00371 
<a name="l00373"></a><a class="code" href="class_rprop_plus.html#a8fd2bcbac961e277ebe871974152edd3">00373</a>     Array&lt;double&gt; <a class="code" href="class_rprop_plus.html#a8fd2bcbac961e277ebe871974152edd3" title="The final update values for all weights.">deltaw</a>;
<a name="l00374"></a>00374 
<a name="l00376"></a><a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641">00376</a>     Array&lt;double&gt; <a class="code" href="class_rprop_plus.html#a1e62f3bd7e72a17d27d7afe5e3e77641" title="The last error gradient.">dedwOld</a>;
<a name="l00377"></a>00377 
<a name="l00379"></a><a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e">00379</a>     Array&lt;double&gt; <a class="code" href="class_rprop_plus.html#aadff8ecec3c78eee9cc76cf36d2bd89e" title="The absolute update values (increment) for all weights.">delta</a>;
<a name="l00380"></a>00380 
<a name="l00381"></a>00381 };
<a name="l00382"></a>00382 
<a name="l00383"></a>00383 <span class="comment">//===========================================================================</span>
<a name="l00450"></a><a class="code" href="class_rprop_minus.html">00450</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="class_rprop_minus.html" title="This class offers methods for the usage of the Resilient-Backpropagation-algorithm without weight-bac...">RpropMinus</a> : <span class="keyword">public</span> <a class="code" href="class_optimizer.html" title="Base class of all optimizers.">Optimizer</a>
<a name="l00451"></a>00451 {
<a name="l00452"></a>00452 <span class="keyword">public</span>:
<a name="l00453"></a>00453 
<a name="l00454"></a>00454     <span class="comment">//===========================================================================</span>
<a name="l00480"></a><a class="code" href="class_rprop_minus.html#a64c0b2a15eb4e75a4e3ddd34a7a01fd6">00480</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_rprop_minus.html#a64c0b2a15eb4e75a4e3ddd34a7a01fd6" title="Initializes the optimizer with default parameters.">init</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model)
<a name="l00481"></a>00481     {
<a name="l00482"></a>00482         <a class="code" href="class_rprop_minus.html#a1a11164834e70093b223057645addb7c" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(model);
<a name="l00483"></a>00483     }
<a name="l00484"></a>00484 
<a name="l00485"></a>00485     <span class="comment">//===========================================================================</span>
<a name="l00514"></a><a class="code" href="class_rprop_minus.html#a1a11164834e70093b223057645addb7c">00514</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_rprop_minus.html#a1a11164834e70093b223057645addb7c" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model, <span class="keywordtype">double</span> npP = 1.2, <span class="keywordtype">double</span> nmP = 0.5, <span class="keywordtype">double</span> dMaxP = 1e100, <span class="keywordtype">double</span> dMinP = 0.0, <span class="keywordtype">double</span> delta0P = 0.01)
<a name="l00515"></a>00515     {
<a name="l00516"></a>00516         <a class="code" href="class_rprop_minus.html#a5e4399bc0d8cde291f6ca6adfc141c75" title="The increase factor , set to 1.2 by default.">np</a>      = npP;
<a name="l00517"></a>00517         <a class="code" href="class_rprop_minus.html#a4dc48507b4d22a398e63cc51c1219b1e" title="The decrease factor , set to 0.5 by default.">nm</a>      = nmP;
<a name="l00518"></a>00518         <a class="code" href="class_rprop_minus.html#abfcf949e6c702866b51eabc1d9ba2318" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>    = dMaxP;
<a name="l00519"></a>00519         <a class="code" href="class_rprop_minus.html#ad5248ea20de4d735bc6717b53554e100" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>    = dMinP;
<a name="l00520"></a>00520 
<a name="l00521"></a>00521         <a class="code" href="class_rprop_minus.html#afedb9e3b9f414720b5621bf20ac6a5e7" title="The final update values for all weights.">deltaw</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00522"></a>00522         <a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00523"></a>00523         <a class="code" href="class_rprop_minus.html#ad5660952f3ce8b820c3afc63b855d75d" title="The last error gradient.">dedwOld</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00524"></a>00524 
<a name="l00525"></a>00525         <a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>   = delta0P;
<a name="l00526"></a>00526         <a class="code" href="class_rprop_minus.html#afedb9e3b9f414720b5621bf20ac6a5e7" title="The final update values for all weights.">deltaw</a>  = 0;
<a name="l00527"></a>00527         <a class="code" href="class_rprop_minus.html#ad5660952f3ce8b820c3afc63b855d75d" title="The last error gradient.">dedwOld</a> = 0;
<a name="l00528"></a>00528     }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530     <span class="comment">//===========================================================================</span>
<a name="l00552"></a><a class="code" href="class_rprop_minus.html#aaaab8e1b5d16d7bf1f76b0b7a80643f2">00552</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_rprop_minus.html#a1a11164834e70093b223057645addb7c" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model, <span class="keyword">const</span> Array&lt;double&gt;&amp; delta0P, <span class="keywordtype">double</span> npP = 1.2, <span class="keywordtype">double</span> nmP = 0.5, <span class="keywordtype">double</span> dMaxP = 1e100, <span class="keywordtype">double</span> dMinP = 0.0)
<a name="l00553"></a>00553     {
<a name="l00554"></a>00554         <a class="code" href="class_rprop_minus.html#a5e4399bc0d8cde291f6ca6adfc141c75" title="The increase factor , set to 1.2 by default.">np</a>      = npP;
<a name="l00555"></a>00555         <a class="code" href="class_rprop_minus.html#a4dc48507b4d22a398e63cc51c1219b1e" title="The decrease factor , set to 0.5 by default.">nm</a>      = nmP;
<a name="l00556"></a>00556         <a class="code" href="class_rprop_minus.html#abfcf949e6c702866b51eabc1d9ba2318" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>    = dMaxP;
<a name="l00557"></a>00557         <a class="code" href="class_rprop_minus.html#ad5248ea20de4d735bc6717b53554e100" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>    = dMinP;
<a name="l00558"></a>00558 
<a name="l00559"></a>00559         <a class="code" href="class_rprop_minus.html#afedb9e3b9f414720b5621bf20ac6a5e7" title="The final update values for all weights.">deltaw</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00560"></a>00560         <a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00561"></a>00561         <a class="code" href="class_rprop_minus.html#ad5660952f3ce8b820c3afc63b855d75d" title="The last error gradient.">dedwOld</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00562"></a>00562 
<a name="l00563"></a>00563         <a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>   = delta0P;
<a name="l00564"></a>00564         <a class="code" href="class_rprop_minus.html#afedb9e3b9f414720b5621bf20ac6a5e7" title="The final update values for all weights.">deltaw</a>  = 0.0;
<a name="l00565"></a>00565         <a class="code" href="class_rprop_minus.html#ad5660952f3ce8b820c3afc63b855d75d" title="The last error gradient.">dedwOld</a> = 0.0;
<a name="l00566"></a>00566     }
<a name="l00567"></a>00567 
<a name="l00568"></a>00568     <span class="comment">//===========================================================================</span>
<a name="l00594"></a><a class="code" href="class_rprop_minus.html#a07bb80c33e4edbebe7119bfe6f116475">00594</a> <span class="comment"></span>    <span class="keywordtype">double</span> <a class="code" href="class_rprop_minus.html#a07bb80c33e4edbebe7119bfe6f116475" title="Performs a run of the Rprop algorithm.">optimize</a>(
<a name="l00595"></a>00595         <a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model,
<a name="l00596"></a>00596         <a class="code" href="class_error_function.html" title="Base class of all error measures.">ErrorFunction</a>&amp; errorfunction,
<a name="l00597"></a>00597         <span class="keyword">const</span> Array&lt;double&gt;&amp; input,
<a name="l00598"></a>00598         <span class="keyword">const</span> Array&lt;double&gt;&amp; target)
<a name="l00599"></a>00599     {
<a name="l00600"></a>00600         Array&lt;double&gt; dedw(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00601"></a>00601         <span class="keywordtype">double</span> currentError = errorfunction.<a class="code" href="class_error_function.html#a1d7581c61746f51aa96f74fc17a30d55" title="Calculates the field derivative, the derivative of the error  with respect to the model parameters...">errorDerivative</a>(model, input, target, dedw); <span class="comment">//derror(in, out,false);</span>
<a name="l00602"></a>00602         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a> = 0; <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a> &lt; model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>(); <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>++)
<a name="l00603"></a>00603         {
<a name="l00604"></a>00604             <span class="keywordtype">double</span> p = model.<a class="code" href="class_model.html#a8e8eca8ae3e8e53ca0aa6a1731e1f0f6" title="Returns a specific model parameter.">getParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>);
<a name="l00605"></a>00605             <span class="keywordflow">if</span> (dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * <a class="code" href="class_rprop_minus.html#ad5660952f3ce8b820c3afc63b855d75d" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) &gt; 0)
<a name="l00606"></a>00606             {
<a name="l00607"></a>00607                 <a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = Shark::min(<a class="code" href="class_rprop_minus.html#abfcf949e6c702866b51eabc1d9ba2318" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>, <a class="code" href="class_rprop_minus.html#a5e4399bc0d8cde291f6ca6adfc141c75" title="The increase factor , set to 1.2 by default.">np</a> * <a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00608"></a>00608             }
<a name="l00609"></a>00609             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * <a class="code" href="class_rprop_minus.html#ad5660952f3ce8b820c3afc63b855d75d" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) &lt; 0)
<a name="l00610"></a>00610             {
<a name="l00611"></a>00611                 <a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = Shark::max(<a class="code" href="class_rprop_minus.html#ad5248ea20de4d735bc6717b53554e100" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>, <a class="code" href="class_rprop_minus.html#a4dc48507b4d22a398e63cc51c1219b1e" title="The decrease factor , set to 0.5 by default.">nm</a> * <a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00612"></a>00612             }
<a name="l00613"></a>00613             <span class="keywordflow">else</span>
<a name="l00614"></a>00614             {
<a name="l00615"></a>00615                 ; <span class="comment">// void</span>
<a name="l00616"></a>00616             }
<a name="l00617"></a>00617             model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p + <a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * -<a class="code" href="class_rprop_minus.html#ab4c03efac947d291664bbd12d15c091d" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>))); <span class="comment">//w(i) += delta(i) * -sgn(dedw(i));</span>
<a name="l00618"></a>00618             <span class="keywordflow">if</span> (! model.<a class="code" href="class_model.html#a49d9dae98bd077daf18e7f96f2afcedc" title="check whether the parameters define a feasible model">isFeasible</a>())
<a name="l00619"></a>00619             {
<a name="l00620"></a>00620                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p);
<a name="l00621"></a>00621                 <a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) *= <a class="code" href="class_rprop_minus.html#a4dc48507b4d22a398e63cc51c1219b1e" title="The decrease factor , set to 0.5 by default.">nm</a>;
<a name="l00622"></a>00622                 <a class="code" href="class_rprop_minus.html#ad5660952f3ce8b820c3afc63b855d75d" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = 0.0;
<a name="l00623"></a>00623             }
<a name="l00624"></a>00624             <span class="keywordflow">else</span>
<a name="l00625"></a>00625             {
<a name="l00626"></a>00626                 <a class="code" href="class_rprop_minus.html#ad5660952f3ce8b820c3afc63b855d75d" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>);
<a name="l00627"></a>00627             }
<a name="l00628"></a>00628         }
<a name="l00629"></a>00629         <span class="keywordflow">return</span> currentError;
<a name="l00630"></a>00630     }
<a name="l00631"></a>00631 
<a name="l00633"></a><a class="code" href="class_rprop_minus.html#a064da1cdaa67efd5cf8f14ef4905833c">00633</a>     <span class="keywordtype">double</span> <a class="code" href="class_rprop_minus.html#a064da1cdaa67efd5cf8f14ef4905833c" title="return the maximal step size component">maxDelta</a>()<span class="keyword"> const</span>
<a name="l00634"></a>00634 <span class="keyword">    </span>{
<a name="l00635"></a>00635         <span class="keywordflow">return</span> maxElement(<a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>);
<a name="l00636"></a>00636     }
<a name="l00637"></a>00637 
<a name="l00638"></a>00638 <span class="keyword">protected</span>:
<a name="l00639"></a>00639 
<a name="l00640"></a>00640     <span class="comment">//===========================================================================</span>
<a name="l00657"></a><a class="code" href="class_rprop_minus.html#ab4c03efac947d291664bbd12d15c091d">00657</a> <span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="class_rprop_minus.html#ab4c03efac947d291664bbd12d15c091d" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(<span class="keywordtype">double</span> x)
<a name="l00658"></a>00658     {
<a name="l00659"></a>00659         <span class="keywordflow">if</span> (x &gt; 0) <span class="keywordflow">return</span> 1; <span class="keywordflow">if</span> (x &lt; 0) <span class="keywordflow">return</span> -1; <span class="keywordflow">return</span> 0;
<a name="l00660"></a>00660     }
<a name="l00661"></a>00661 
<a name="l00663"></a><a class="code" href="class_rprop_minus.html#a5e4399bc0d8cde291f6ca6adfc141c75">00663</a>     <span class="keywordtype">double</span> <a class="code" href="class_rprop_minus.html#a5e4399bc0d8cde291f6ca6adfc141c75" title="The increase factor , set to 1.2 by default.">np</a>;
<a name="l00664"></a>00664 
<a name="l00666"></a><a class="code" href="class_rprop_minus.html#a4dc48507b4d22a398e63cc51c1219b1e">00666</a>     <span class="keywordtype">double</span> <a class="code" href="class_rprop_minus.html#a4dc48507b4d22a398e63cc51c1219b1e" title="The decrease factor , set to 0.5 by default.">nm</a>;
<a name="l00667"></a>00667 
<a name="l00669"></a><a class="code" href="class_rprop_minus.html#abfcf949e6c702866b51eabc1d9ba2318">00669</a>     <span class="keywordtype">double</span> <a class="code" href="class_rprop_minus.html#abfcf949e6c702866b51eabc1d9ba2318" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>;
<a name="l00670"></a>00670 
<a name="l00672"></a><a class="code" href="class_rprop_minus.html#ad5248ea20de4d735bc6717b53554e100">00672</a>     <span class="keywordtype">double</span> <a class="code" href="class_rprop_minus.html#ad5248ea20de4d735bc6717b53554e100" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>;
<a name="l00673"></a>00673 
<a name="l00675"></a><a class="code" href="class_rprop_minus.html#afedb9e3b9f414720b5621bf20ac6a5e7">00675</a>     Array&lt;double&gt; <a class="code" href="class_rprop_minus.html#afedb9e3b9f414720b5621bf20ac6a5e7" title="The final update values for all weights.">deltaw</a>;
<a name="l00676"></a>00676 
<a name="l00678"></a><a class="code" href="class_rprop_minus.html#ad5660952f3ce8b820c3afc63b855d75d">00678</a>     Array&lt;double&gt; <a class="code" href="class_rprop_minus.html#ad5660952f3ce8b820c3afc63b855d75d" title="The last error gradient.">dedwOld</a>;
<a name="l00679"></a>00679 
<a name="l00681"></a><a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044">00681</a>     Array&lt;double&gt; <a class="code" href="class_rprop_minus.html#a025ca5f791d6da3fcbcfcfceaa8e6044" title="The absolute update values (increment) for all weights.">delta</a>;
<a name="l00682"></a>00682 
<a name="l00683"></a>00683 };
<a name="l00684"></a>00684 
<a name="l00685"></a>00685 
<a name="l00686"></a>00686 <span class="comment">//===========================================================================</span>
<a name="l00788"></a><a class="code" href="class_i_rprop_plus.html">00788</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="class_i_rprop_plus.html" title="This class offers methods for the usage of the improved Resilient-Backpropagation-algorithm with weig...">IRpropPlus</a> : <span class="keyword">public</span> <a class="code" href="class_optimizer.html" title="Base class of all optimizers.">Optimizer</a>
<a name="l00789"></a>00789 {
<a name="l00790"></a>00790 <span class="keyword">public</span>:
<a name="l00791"></a>00791 
<a name="l00792"></a>00792     <span class="comment">//===========================================================================</span>
<a name="l00818"></a><a class="code" href="class_i_rprop_plus.html#a1200d6b247139bf76b20a9d49768d639">00818</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_i_rprop_plus.html#a1200d6b247139bf76b20a9d49768d639" title="Initializes the optimizer with default parameters.">init</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model)
<a name="l00819"></a>00819     {
<a name="l00820"></a>00820         <a class="code" href="class_i_rprop_plus.html#ab73ddd30441e3e99ad335cacd56aa039" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(model);
<a name="l00821"></a>00821     }
<a name="l00822"></a>00822 
<a name="l00823"></a>00823     <span class="comment">//===========================================================================</span>
<a name="l00852"></a><a class="code" href="class_i_rprop_plus.html#ab73ddd30441e3e99ad335cacd56aa039">00852</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_i_rprop_plus.html#ab73ddd30441e3e99ad335cacd56aa039" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model, <span class="keywordtype">double</span> npP = 1.2, <span class="keywordtype">double</span> nmP = 0.5, <span class="keywordtype">double</span> dMaxP = 1e100, <span class="keywordtype">double</span> dMinP = 0.0, <span class="keywordtype">double</span> delta0P = 0.01)
<a name="l00853"></a>00853     {
<a name="l00854"></a>00854         <a class="code" href="class_i_rprop_plus.html#a7f75c126669a1cdc7d9dabd5a36890c2" title="The increase factor , set to 1.2 by default.">np</a>      = npP;
<a name="l00855"></a>00855         <a class="code" href="class_i_rprop_plus.html#aa3d5461b5e259714eb4047a43bbab41a" title="The decrease factor , set to 0.5 by default.">nm</a>      = nmP;
<a name="l00856"></a>00856         <a class="code" href="class_i_rprop_plus.html#ae13994f7953a2f73ba90d917a15aa050" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>    = dMaxP;
<a name="l00857"></a>00857         <a class="code" href="class_i_rprop_plus.html#ab074ccb618134311d21d66dc57360886" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>    = dMinP;
<a name="l00858"></a>00858 
<a name="l00859"></a>00859         <a class="code" href="class_i_rprop_plus.html#a294cb9a2d93f702a504db472e4a9cda2" title="The final update values for all weights.">deltaw</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00860"></a>00860         <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00861"></a>00861         <a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224" title="The last error gradient.">dedwOld</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00862"></a>00862 
<a name="l00863"></a>00863         <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>   = delta0P;
<a name="l00864"></a>00864         <a class="code" href="class_i_rprop_plus.html#a294cb9a2d93f702a504db472e4a9cda2" title="The final update values for all weights.">deltaw</a>  = 0;
<a name="l00865"></a>00865         <a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224" title="The last error gradient.">dedwOld</a> = 0;
<a name="l00866"></a>00866 
<a name="l00867"></a>00867         <a class="code" href="class_i_rprop_plus.html#acb43fb80d82889f9c0f79e3d3741d836" title="The error of the last iteration.">oldError</a>   = MAXDOUBLE;
<a name="l00868"></a>00868     }
<a name="l00869"></a>00869 
<a name="l00870"></a>00870     <span class="comment">//===========================================================================</span>
<a name="l00892"></a><a class="code" href="class_i_rprop_plus.html#a31f8b715bac9df8f9cf5ee076c8a7250">00892</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_i_rprop_plus.html#ab73ddd30441e3e99ad335cacd56aa039" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model, <span class="keyword">const</span> Array&lt;double&gt;&amp; delta0P, <span class="keywordtype">double</span> npP = 1.2, <span class="keywordtype">double</span> nmP = 0.5, <span class="keywordtype">double</span> dMaxP = 1e100, <span class="keywordtype">double</span> dMinP = 0.0)
<a name="l00893"></a>00893     {
<a name="l00894"></a>00894         <a class="code" href="class_i_rprop_plus.html#a7f75c126669a1cdc7d9dabd5a36890c2" title="The increase factor , set to 1.2 by default.">np</a>      = npP;
<a name="l00895"></a>00895         <a class="code" href="class_i_rprop_plus.html#aa3d5461b5e259714eb4047a43bbab41a" title="The decrease factor , set to 0.5 by default.">nm</a>      = nmP;
<a name="l00896"></a>00896         <a class="code" href="class_i_rprop_plus.html#ae13994f7953a2f73ba90d917a15aa050" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>    = dMaxP;
<a name="l00897"></a>00897         <a class="code" href="class_i_rprop_plus.html#ab074ccb618134311d21d66dc57360886" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>    = dMinP;
<a name="l00898"></a>00898 
<a name="l00899"></a>00899         <a class="code" href="class_i_rprop_plus.html#a294cb9a2d93f702a504db472e4a9cda2" title="The final update values for all weights.">deltaw</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00900"></a>00900         <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00901"></a>00901         <a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224" title="The last error gradient.">dedwOld</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00902"></a>00902 
<a name="l00903"></a>00903         <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>   = delta0P;
<a name="l00904"></a>00904         <a class="code" href="class_i_rprop_plus.html#a294cb9a2d93f702a504db472e4a9cda2" title="The final update values for all weights.">deltaw</a>  = 0.0;
<a name="l00905"></a>00905         <a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224" title="The last error gradient.">dedwOld</a> = 0.0;
<a name="l00906"></a>00906 
<a name="l00907"></a>00907         <a class="code" href="class_i_rprop_plus.html#acb43fb80d82889f9c0f79e3d3741d836" title="The error of the last iteration.">oldError</a>   = MAXDOUBLE;
<a name="l00908"></a>00908     }
<a name="l00909"></a>00909 
<a name="l00910"></a>00910     <span class="comment">//===========================================================================</span>
<a name="l00936"></a><a class="code" href="class_i_rprop_plus.html#af67f44cd73418c5e083fc57704341855">00936</a> <span class="comment"></span>    <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_plus.html#af67f44cd73418c5e083fc57704341855" title="Performs a run of the Rprop algorithm.">optimize</a>(
<a name="l00937"></a>00937         <a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model,
<a name="l00938"></a>00938         <a class="code" href="class_error_function.html" title="Base class of all error measures.">ErrorFunction</a>&amp; errorfunction,
<a name="l00939"></a>00939         <span class="keyword">const</span> Array&lt;double&gt;&amp; input,
<a name="l00940"></a>00940         <span class="keyword">const</span> Array&lt;double&gt;&amp; target)
<a name="l00941"></a>00941     {
<a name="l00942"></a>00942         Array&lt;double&gt; dedw(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l00943"></a>00943         <span class="keywordtype">double</span> currentError = errorfunction.<a class="code" href="class_error_function.html#a1d7581c61746f51aa96f74fc17a30d55" title="Calculates the field derivative, the derivative of the error  with respect to the model parameters...">errorDerivative</a>(model, input, target, dedw);
<a name="l00944"></a>00944 
<a name="l00945"></a>00945         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a> = 0; <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a> &lt; model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>(); <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>++)
<a name="l00946"></a>00946         {
<a name="l00947"></a>00947             <span class="keywordtype">double</span> p = model.<a class="code" href="class_model.html#a8e8eca8ae3e8e53ca0aa6a1731e1f0f6" title="Returns a specific model parameter.">getParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>);
<a name="l00948"></a>00948             <span class="keywordflow">if</span> (dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * <a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) &gt; 0)
<a name="l00949"></a>00949             {
<a name="l00950"></a>00950                 <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = Shark::min(<a class="code" href="class_i_rprop_plus.html#ae13994f7953a2f73ba90d917a15aa050" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>, <a class="code" href="class_i_rprop_plus.html#a7f75c126669a1cdc7d9dabd5a36890c2" title="The increase factor , set to 1.2 by default.">np</a> * <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00951"></a>00951                 <a class="code" href="class_i_rprop_plus.html#a294cb9a2d93f702a504db472e4a9cda2" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * -<a class="code" href="class_i_rprop_plus.html#ac2f5e90f44dcde38d7741fc181c0c329" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00952"></a>00952                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p + <a class="code" href="class_i_rprop_plus.html#a294cb9a2d93f702a504db472e4a9cda2" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>)); <span class="comment">//w(i) += deltaw(i);</span>
<a name="l00953"></a>00953                 <a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>);
<a name="l00954"></a>00954             }
<a name="l00955"></a>00955             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * <a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) &lt; 0)
<a name="l00956"></a>00956             {
<a name="l00957"></a>00957                 <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = Shark::max(<a class="code" href="class_i_rprop_plus.html#ab074ccb618134311d21d66dc57360886" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>, <a class="code" href="class_i_rprop_plus.html#aa3d5461b5e259714eb4047a43bbab41a" title="The decrease factor , set to 0.5 by default.">nm</a> * <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00958"></a>00958                 <span class="keywordflow">if</span> (<a class="code" href="class_i_rprop_plus.html#acb43fb80d82889f9c0f79e3d3741d836" title="The error of the last iteration.">oldError</a> &lt; currentError)
<a name="l00959"></a>00959                 {
<a name="l00960"></a>00960                     model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p - <a class="code" href="class_i_rprop_plus.html#a294cb9a2d93f702a504db472e4a9cda2" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>)); <span class="comment">//w(i) -= deltaw(i);</span>
<a name="l00961"></a>00961                 }
<a name="l00962"></a>00962                 <a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = 0;
<a name="l00963"></a>00963             }
<a name="l00964"></a>00964             <span class="keywordflow">else</span>
<a name="l00965"></a>00965             {
<a name="l00966"></a>00966                 <a class="code" href="class_i_rprop_plus.html#a294cb9a2d93f702a504db472e4a9cda2" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * -<a class="code" href="class_i_rprop_plus.html#ac2f5e90f44dcde38d7741fc181c0c329" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l00967"></a>00967                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p + <a class="code" href="class_i_rprop_plus.html#a294cb9a2d93f702a504db472e4a9cda2" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>)); <span class="comment">//w(i) += deltaw(i);</span>
<a name="l00968"></a>00968                 <a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>);
<a name="l00969"></a>00969             }
<a name="l00970"></a>00970             <span class="keywordflow">if</span> (! model.<a class="code" href="class_model.html#a49d9dae98bd077daf18e7f96f2afcedc" title="check whether the parameters define a feasible model">isFeasible</a>())
<a name="l00971"></a>00971             {
<a name="l00972"></a>00972                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p);
<a name="l00973"></a>00973                 <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) *= <a class="code" href="class_i_rprop_plus.html#aa3d5461b5e259714eb4047a43bbab41a" title="The decrease factor , set to 0.5 by default.">nm</a>;
<a name="l00974"></a>00974                 <a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = 0.0;
<a name="l00975"></a>00975             }
<a name="l00976"></a>00976         }
<a name="l00977"></a>00977         <a class="code" href="class_i_rprop_plus.html#acb43fb80d82889f9c0f79e3d3741d836" title="The error of the last iteration.">oldError</a> = currentError;
<a name="l00978"></a>00978         <span class="keywordflow">return</span> currentError;
<a name="l00979"></a>00979     }
<a name="l00980"></a>00980 
<a name="l00982"></a><a class="code" href="class_i_rprop_plus.html#a3d06196f1643594a51fcd200d34c85b4">00982</a>     <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_plus.html#a3d06196f1643594a51fcd200d34c85b4" title="return the maximal step size component">maxDelta</a>()<span class="keyword"> const</span>
<a name="l00983"></a>00983 <span class="keyword">    </span>{
<a name="l00984"></a>00984         <span class="keywordflow">return</span> maxElement(<a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>);
<a name="l00985"></a>00985     }
<a name="l00986"></a>00986 
<a name="l00987"></a>00987 <span class="keyword">protected</span>:
<a name="l00988"></a>00988 
<a name="l00989"></a>00989     <span class="comment">//===========================================================================</span>
<a name="l01006"></a><a class="code" href="class_i_rprop_plus.html#ac2f5e90f44dcde38d7741fc181c0c329">01006</a> <span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="class_i_rprop_plus.html#ac2f5e90f44dcde38d7741fc181c0c329" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(<span class="keywordtype">double</span> x)
<a name="l01007"></a>01007     {
<a name="l01008"></a>01008         <span class="keywordflow">if</span> (x &gt; 0) <span class="keywordflow">return</span> 1; <span class="keywordflow">if</span> (x &lt; 0) <span class="keywordflow">return</span> -1; <span class="keywordflow">return</span> 0;
<a name="l01009"></a>01009     }
<a name="l01010"></a>01010 
<a name="l01012"></a><a class="code" href="class_i_rprop_plus.html#a7f75c126669a1cdc7d9dabd5a36890c2">01012</a>     <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_plus.html#a7f75c126669a1cdc7d9dabd5a36890c2" title="The increase factor , set to 1.2 by default.">np</a>;
<a name="l01013"></a>01013 
<a name="l01015"></a><a class="code" href="class_i_rprop_plus.html#aa3d5461b5e259714eb4047a43bbab41a">01015</a>     <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_plus.html#aa3d5461b5e259714eb4047a43bbab41a" title="The decrease factor , set to 0.5 by default.">nm</a>;
<a name="l01016"></a>01016 
<a name="l01018"></a><a class="code" href="class_i_rprop_plus.html#ae13994f7953a2f73ba90d917a15aa050">01018</a>     <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_plus.html#ae13994f7953a2f73ba90d917a15aa050" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>;
<a name="l01019"></a>01019 
<a name="l01021"></a><a class="code" href="class_i_rprop_plus.html#ab074ccb618134311d21d66dc57360886">01021</a>     <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_plus.html#ab074ccb618134311d21d66dc57360886" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>;
<a name="l01022"></a>01022 
<a name="l01024"></a><a class="code" href="class_i_rprop_plus.html#acb43fb80d82889f9c0f79e3d3741d836">01024</a>     <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_plus.html#acb43fb80d82889f9c0f79e3d3741d836" title="The error of the last iteration.">oldError</a>;
<a name="l01025"></a>01025 
<a name="l01027"></a><a class="code" href="class_i_rprop_plus.html#a294cb9a2d93f702a504db472e4a9cda2">01027</a>     Array&lt;double&gt; <a class="code" href="class_i_rprop_plus.html#a294cb9a2d93f702a504db472e4a9cda2" title="The final update values for all weights.">deltaw</a>;
<a name="l01028"></a>01028 
<a name="l01030"></a><a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224">01030</a>     Array&lt;double&gt; <a class="code" href="class_i_rprop_plus.html#ad902e2ab5fa33ccc607147171b451224" title="The last error gradient.">dedwOld</a>;
<a name="l01031"></a>01031 
<a name="l01033"></a><a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b">01033</a>     Array&lt;double&gt; <a class="code" href="class_i_rprop_plus.html#a7b1ad0cf7fc487f6e0ac74b015ee240b" title="The absolute update values (increment) for all weights.">delta</a>;
<a name="l01034"></a>01034 
<a name="l01035"></a>01035 };
<a name="l01036"></a>01036 
<a name="l01037"></a>01037 <span class="comment">//===========================================================================</span>
<a name="l01111"></a><a class="code" href="class_i_rprop_minus.html">01111</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="class_i_rprop_minus.html" title="This class offers methods for the usage of the improved Resilient-Backpropagation-algorithm without w...">IRpropMinus</a> : <span class="keyword">public</span> <a class="code" href="class_optimizer.html" title="Base class of all optimizers.">Optimizer</a>
<a name="l01112"></a>01112 {
<a name="l01113"></a>01113 <span class="keyword">public</span>:
<a name="l01114"></a>01114 
<a name="l01115"></a>01115     <span class="comment">//===========================================================================</span>
<a name="l01141"></a><a class="code" href="class_i_rprop_minus.html#a97e74828f930486ecd4ed6a5aaaaa09d">01141</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_i_rprop_minus.html#a97e74828f930486ecd4ed6a5aaaaa09d" title="Initializes the optimizer with default parameters.">init</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model)
<a name="l01142"></a>01142     {
<a name="l01143"></a>01143         <a class="code" href="class_i_rprop_minus.html#a6b4224633321108346e50decfc196232" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(model);
<a name="l01144"></a>01144     }
<a name="l01145"></a>01145 
<a name="l01146"></a>01146     <span class="comment">//===========================================================================</span>
<a name="l01175"></a><a class="code" href="class_i_rprop_minus.html#a6b4224633321108346e50decfc196232">01175</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_i_rprop_minus.html#a6b4224633321108346e50decfc196232" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model, <span class="keywordtype">double</span> npP = 1.2, <span class="keywordtype">double</span> nmP = 0.5, <span class="keywordtype">double</span> dMaxP = 1e100, <span class="keywordtype">double</span> dMinP = 0.0, <span class="keywordtype">double</span> delta0P = 0.01)
<a name="l01176"></a>01176     {
<a name="l01177"></a>01177         <a class="code" href="class_i_rprop_minus.html#af7d81fc0cd4132a458c4ea54d0fcf04c" title="The increase factor , set to 1.2 by default.">np</a>      = npP;
<a name="l01178"></a>01178         <a class="code" href="class_i_rprop_minus.html#a0ec42d94a2e2163dba795d81f87fb869" title="The decrease factor , set to 0.5 by default.">nm</a>      = nmP;
<a name="l01179"></a>01179         <a class="code" href="class_i_rprop_minus.html#a74dfb8899d546ff3ad2bfae3430bf52d" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>    = dMaxP;
<a name="l01180"></a>01180         <a class="code" href="class_i_rprop_minus.html#ad1f1756caa4a4fc60558de2f65602d21" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>    = dMinP;
<a name="l01181"></a>01181 
<a name="l01182"></a>01182         <a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3" title="The final update values for all weights.">deltaw</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l01183"></a>01183         <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l01184"></a>01184         <a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48" title="The last error gradient.">dedwOld</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l01185"></a>01185 
<a name="l01186"></a>01186         <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>   = delta0P;
<a name="l01187"></a>01187         <a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3" title="The final update values for all weights.">deltaw</a>  = 0;
<a name="l01188"></a>01188         <a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48" title="The last error gradient.">dedwOld</a> = 0;
<a name="l01189"></a>01189     }
<a name="l01190"></a>01190 
<a name="l01191"></a>01191     <span class="comment">//===========================================================================</span>
<a name="l01213"></a><a class="code" href="class_i_rprop_minus.html#aa00dd09fa1dea85a8013f038283944ce">01213</a> <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="class_i_rprop_minus.html#a6b4224633321108346e50decfc196232" title="Prepares the Rprop algorithm for the given network.">initUserDefined</a>(<a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model, <span class="keyword">const</span> Array&lt;double&gt;&amp; delta0P, <span class="keywordtype">double</span> npP = 1.2, <span class="keywordtype">double</span> nmP = 0.5, <span class="keywordtype">double</span> dMaxP = 1e100, <span class="keywordtype">double</span> dMinP = 0.0)
<a name="l01214"></a>01214     {
<a name="l01215"></a>01215         <a class="code" href="class_i_rprop_minus.html#af7d81fc0cd4132a458c4ea54d0fcf04c" title="The increase factor , set to 1.2 by default.">np</a>      = npP;
<a name="l01216"></a>01216         <a class="code" href="class_i_rprop_minus.html#a0ec42d94a2e2163dba795d81f87fb869" title="The decrease factor , set to 0.5 by default.">nm</a>      = nmP;
<a name="l01217"></a>01217         <a class="code" href="class_i_rprop_minus.html#a74dfb8899d546ff3ad2bfae3430bf52d" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>    = dMaxP;
<a name="l01218"></a>01218         <a class="code" href="class_i_rprop_minus.html#ad1f1756caa4a4fc60558de2f65602d21" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>    = dMinP;
<a name="l01219"></a>01219 
<a name="l01220"></a>01220         <a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3" title="The final update values for all weights.">deltaw</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l01221"></a>01221         <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l01222"></a>01222         <a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48" title="The last error gradient.">dedwOld</a>.resize(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l01223"></a>01223 
<a name="l01224"></a>01224         <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>   = delta0P;
<a name="l01225"></a>01225         <a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3" title="The final update values for all weights.">deltaw</a>  = 0.0;
<a name="l01226"></a>01226         <a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48" title="The last error gradient.">dedwOld</a> = 0.0;
<a name="l01227"></a>01227     }
<a name="l01228"></a>01228 
<a name="l01229"></a>01229     <span class="comment">//===========================================================================</span>
<a name="l01255"></a><a class="code" href="class_i_rprop_minus.html#ac234890484c56e4f2e412164287281b5">01255</a> <span class="comment"></span>    <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_minus.html#ac234890484c56e4f2e412164287281b5" title="Performs a run of the Rprop algorithm.">optimize</a>(
<a name="l01256"></a>01256         <a class="code" href="class_model.html" title="Base class of all models.">Model</a>&amp; model,
<a name="l01257"></a>01257         <a class="code" href="class_error_function.html" title="Base class of all error measures.">ErrorFunction</a>&amp; errorfunction,
<a name="l01258"></a>01258         <span class="keyword">const</span> Array&lt;double&gt;&amp; input,
<a name="l01259"></a>01259         <span class="keyword">const</span> Array&lt;double&gt;&amp; target)
<a name="l01260"></a>01260     {
<a name="l01261"></a>01261         Array&lt;double&gt; dedw(model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>());
<a name="l01262"></a>01262         <span class="keywordtype">double</span> currentError = errorfunction.<a class="code" href="class_error_function.html#a1d7581c61746f51aa96f74fc17a30d55" title="Calculates the field derivative, the derivative of the error  with respect to the model parameters...">errorDerivative</a>(model, input, target, dedw); <span class="comment">//derror(in, out, false);</span>
<a name="l01263"></a>01263 
<a name="l01264"></a>01264         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a> = 0; <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a> &lt; model.<a class="code" href="class_model.html#a2ebb8ac2983ee894725ea0edd8a78473" title="Returns the number of optimizable model parameters, i.e.">getParameterDimension</a>(); <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>++)
<a name="l01265"></a>01265         {
<a name="l01266"></a>01266             <span class="keywordtype">double</span> p = model.<a class="code" href="class_model.html#a8e8eca8ae3e8e53ca0aa6a1731e1f0f6" title="Returns a specific model parameter.">getParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>);
<a name="l01267"></a>01267             <span class="keywordflow">if</span> (dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * <a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) &gt; 0)
<a name="l01268"></a>01268             {
<a name="l01269"></a>01269                 <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = Shark::min(<a class="code" href="class_i_rprop_minus.html#a74dfb8899d546ff3ad2bfae3430bf52d" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>, <a class="code" href="class_i_rprop_minus.html#af7d81fc0cd4132a458c4ea54d0fcf04c" title="The increase factor , set to 1.2 by default.">np</a> * <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l01270"></a>01270                 <a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * -<a class="code" href="class_i_rprop_minus.html#abe370d6d22dbdef93812005bf5e4e505" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l01271"></a>01271                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p + <a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>)); <span class="comment">//w(i) += deltaw(i);</span>
<a name="l01272"></a>01272                 <a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>);
<a name="l01273"></a>01273             }
<a name="l01274"></a>01274             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * <a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) &lt; 0)
<a name="l01275"></a>01275             {
<a name="l01276"></a>01276                 <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = Shark::max(<a class="code" href="class_i_rprop_minus.html#ad1f1756caa4a4fc60558de2f65602d21" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>, <a class="code" href="class_i_rprop_minus.html#a0ec42d94a2e2163dba795d81f87fb869" title="The decrease factor , set to 0.5 by default.">nm</a> * <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l01277"></a>01277                 <a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * -<a class="code" href="class_i_rprop_minus.html#abe370d6d22dbdef93812005bf5e4e505" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l01278"></a>01278                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p + <a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>)); <span class="comment">//w(i) += deltaw(i);</span>
<a name="l01279"></a>01279                 <a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = 0;
<a name="l01280"></a>01280             }
<a name="l01281"></a>01281             <span class="keywordflow">else</span>
<a name="l01282"></a>01282             {
<a name="l01283"></a>01283                 <a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) * -<a class="code" href="class_i_rprop_minus.html#abe370d6d22dbdef93812005bf5e4e505" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>));
<a name="l01284"></a>01284                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p + <a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3" title="The final update values for all weights.">deltaw</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>)); <span class="comment">//w(i) += deltaw(i);</span>
<a name="l01285"></a>01285                 <a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = dedw(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>);
<a name="l01286"></a>01286             }
<a name="l01287"></a>01287             <span class="keywordflow">if</span> (! model.<a class="code" href="class_model.html#a49d9dae98bd077daf18e7f96f2afcedc" title="check whether the parameters define a feasible model">isFeasible</a>())
<a name="l01288"></a>01288             {
<a name="l01289"></a>01289                 model.<a class="code" href="class_model.html#a7eac39377437bd4f0f9c6368e6cbe6f4" title="Modifies a specific model parameter.">setParameter</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>, p);
<a name="l01290"></a>01290                 <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) *= <a class="code" href="class_i_rprop_minus.html#a0ec42d94a2e2163dba795d81f87fb869" title="The decrease factor , set to 0.5 by default.">nm</a>;
<a name="l01291"></a>01291                 <a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48" title="The last error gradient.">dedwOld</a>(<a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>) = 0.0;
<a name="l01292"></a>01292             }
<a name="l01293"></a>01293         }
<a name="l01294"></a>01294         <span class="keywordflow">return</span> currentError;
<a name="l01295"></a>01295     }
<a name="l01296"></a>01296 
<a name="l01298"></a><a class="code" href="class_i_rprop_minus.html#a6847800fbdd70ce454b0203bd55e2706">01298</a>     <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_minus.html#a6847800fbdd70ce454b0203bd55e2706" title="return the maximal step size component">maxDelta</a>()<span class="keyword"> const</span>
<a name="l01299"></a>01299 <span class="keyword">    </span>{
<a name="l01300"></a>01300         <span class="keywordflow">return</span> maxElement(<a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>);
<a name="l01301"></a>01301     }
<a name="l01302"></a>01302 
<a name="l01303"></a>01303 <span class="keyword">protected</span>:
<a name="l01304"></a>01304 
<a name="l01305"></a>01305     <span class="comment">//===========================================================================</span>
<a name="l01322"></a><a class="code" href="class_i_rprop_minus.html#abe370d6d22dbdef93812005bf5e4e505">01322</a> <span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="class_i_rprop_minus.html#abe370d6d22dbdef93812005bf5e4e505" title="Determines the sign of &amp;quot;x&amp;quot;.">sgn</a>(<span class="keywordtype">double</span> x)
<a name="l01323"></a>01323     {
<a name="l01324"></a>01324         <span class="keywordflow">if</span> (x &gt; 0) <span class="keywordflow">return</span> 1; <span class="keywordflow">if</span> (x &lt; 0) <span class="keywordflow">return</span> -1; <span class="keywordflow">return</span> 0;
<a name="l01325"></a>01325     }
<a name="l01326"></a>01326 
<a name="l01328"></a><a class="code" href="class_i_rprop_minus.html#af7d81fc0cd4132a458c4ea54d0fcf04c">01328</a>     <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_minus.html#af7d81fc0cd4132a458c4ea54d0fcf04c" title="The increase factor , set to 1.2 by default.">np</a>;
<a name="l01329"></a>01329 
<a name="l01331"></a><a class="code" href="class_i_rprop_minus.html#a0ec42d94a2e2163dba795d81f87fb869">01331</a>     <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_minus.html#a0ec42d94a2e2163dba795d81f87fb869" title="The decrease factor , set to 0.5 by default.">nm</a>;
<a name="l01332"></a>01332 
<a name="l01334"></a><a class="code" href="class_i_rprop_minus.html#a74dfb8899d546ff3ad2bfae3430bf52d">01334</a>     <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_minus.html#a74dfb8899d546ff3ad2bfae3430bf52d" title="The upper limit of the increments , set to 1e100 by default.">dMax</a>;
<a name="l01335"></a>01335 
<a name="l01337"></a><a class="code" href="class_i_rprop_minus.html#ad1f1756caa4a4fc60558de2f65602d21">01337</a>     <span class="keywordtype">double</span> <a class="code" href="class_i_rprop_minus.html#ad1f1756caa4a4fc60558de2f65602d21" title="The lower limit of the increments , set to 0.0 by default.">dMin</a>;
<a name="l01338"></a>01338 
<a name="l01340"></a><a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3">01340</a>     Array&lt;double&gt; <a class="code" href="class_i_rprop_minus.html#aadbe56bb4caa3a1dd40e8e6f14433fe3" title="The final update values for all weights.">deltaw</a>;
<a name="l01341"></a>01341 
<a name="l01343"></a><a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48">01343</a>     Array&lt;double&gt; <a class="code" href="class_i_rprop_minus.html#a5aeaad29f7420c36ee03c04c70d6db48" title="The last error gradient.">dedwOld</a>;
<a name="l01344"></a>01344 
<a name="l01346"></a><a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858">01346</a>     Array&lt;double&gt; <a class="code" href="class_i_rprop_minus.html#a01ed404b023efb45f321baf0f8f43858" title="The absolute update values (increment) for all weights.">delta</a>;
<a name="l01347"></a>01347 
<a name="l01348"></a>01348 };
<a name="l01349"></a>01349 
<a name="l01352"></a><a class="code" href="_rprop_8h.html#a4db3cc6137567c8faa824add04bf7d89">01352</a> <span class="keyword">typedef</span> <a class="code" href="class_i_rprop_plus.html" title="This class offers methods for the usage of the improved Resilient-Backpropagation-algorithm with weig...">IRpropPlus</a> <a class="code" href="_rprop_8h.html#a4db3cc6137567c8faa824add04bf7d89" title="Used to connect the class names with the year of publication of the paper in which the algorithm was ...">Rprop99</a>;
<a name="l01353"></a>01353 
<a name="l01356"></a><a class="code" href="_rprop_8h.html#a5f552c304aba5ce963d40f4cd72491c1">01356</a> <span class="keyword">typedef</span> <a class="code" href="class_i_rprop_minus.html" title="This class offers methods for the usage of the improved Resilient-Backpropagation-algorithm without w...">IRpropMinus</a> <a class="code" href="_rprop_8h.html#a5f552c304aba5ce963d40f4cd72491c1" title="Used to connect the class names with the year of publication of the paper in which the algorithm was ...">Rprop99d</a>;
<a name="l01357"></a>01357 
<a name="l01360"></a><a class="code" href="_rprop_8h.html#ad8bbc36aba4c472b48a1598fadf4abd2">01360</a> <span class="keyword">typedef</span> <a class="code" href="class_rprop_plus.html" title="This class offers methods for the usage of the Resilient-Backpropagation-algorithm with weight-backtr...">RpropPlus</a> <a class="code" href="_rprop_8h.html#ad8bbc36aba4c472b48a1598fadf4abd2" title="Used to connect the class names with the year of publication of the paper in which the algorithm was ...">Rprop93</a>;
<a name="l01361"></a>01361 
<a name="l01364"></a><a class="code" href="_rprop_8h.html#a2407826b3ba009984917163b0e6eec5f">01364</a> <span class="keyword">typedef</span> <a class="code" href="class_rprop_minus.html" title="This class offers methods for the usage of the Resilient-Backpropagation-algorithm without weight-bac...">RpropMinus</a> <a class="code" href="_rprop_8h.html#a2407826b3ba009984917163b0e6eec5f" title="Used to connect the class names with the year of publication of the paper in which the algorithm was ...">Rprop94</a>;
<a name="l01365"></a>01365 
<a name="l01366"></a>01366 <span class="preprocessor">#endif</span>
<a name="l01367"></a>01367 <span class="preprocessor"></span>
</pre></div></div>
</div>
</div>
</div>
</body></html>
