<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ReClaM: PCAtest.cpp</title>
<script type="text/javaScript" src="search/search.js"></script>
<link href="../css/main.css" rel="stylesheet" type="text/css"/>
</head>
<body id="type-b">

<div id="wrap">
<div id="header">
<div id="site-name">Shark Machine Learning Library</div>
<div id="poweredby">
<img style="width: 95%;" src="../images/SharkLogo.png"/>
</div>		
  
<ul id="nav">
  <li class="first"><a href="../index.html">About Shark</a></li>
  <li><a href="#">Sourceforge</a>
  
  <ul>
    <li class="first"><a href="http://shark-project.sourceforge.net">Project Summary</a></li>
    <li><a href="http://sourceforge.net/projects/shark-project/files/">Downloads</a></li>
    <li><a href="http://sourceforge.net/projects/shark-project/develop">Subversion Repository</a></li>
  </ul>
  
</li>
<li class="first"><a href="../GettingStarted.html">Getting Started</a>
<li class="first"><a href="../Tutorials.html">Tutorials</a>
<li class="first"><a href="../FAQ.html">FAQ</a>

<li class="first"><a href="#">Main Modules</a>
<ul>
  <li class="first"><a href="../ReClaM/index.html">ReClaM</a>
  <li class="first"><a href="../EALib/index.html">EALib</a>
  <li class="first"><a href="../MOO-EALib/index.html">MOO-EALib</a>
  <li class="first"><a href="../Fuzzy/index.html">Fuzzy</a>
</ul>
</li>
<li class="first"><a href="#">Tools</a>
<ul>
  <li class="first"><a href="../Mixture/index.html">Mixture</a>
  <li><a href="../Array/index.html">Array</a>
  <li><a href="../Rng/index.html">Rng</a>
  <li><a href="../LinAlg/index.html">LinAlg</a>
  <li class="last"><a href="../FileUtil/index.html">FileUtil</a>		    
</ul>
</li>
</ul>
</div>

<!--<div id="header">
<div id="site-name">Shark Machine Learning Library</div>
  <ul id="nav">
    <li><a href="../index.html"><span>Shark&nbsp;Main&nbsp;Page</span></a></li>
    <li><a href="../Array/index.html"><span>Array</span></a></li>
    <li><a href="../Rng/index.html"><span>Rng</span></a></li>
    <li><a href="../LinAlg/index.html"><span>LinAlg</span></a></li>
    <li><a href="../FileUtil/index.html"><span>FileUtil</span></a></li>
    <li><a href="../EALib/index.html"><span>EALib</span></a></li>
    <li><a href="../MOO-EALib/index.html"><span>MOO-EALib</span></a></li>
    <li class="active"><a href="../ReClaM/index.html"><span>ReClaM</span></a></li>
    <li><a href="../Fuzzy/index.html"><span>Fuzzy</span></a></li>
    <li><a href="../Mixture/index.html"><span>Mixture</span></a></li>
    <li><a href="../tutorials/index.html"><span>Tutorials</span></a></li>
    <li><a href="../faq/index.html"><span>FAQ</span></a></li>
  </ul>
 </div> -->
<!-- Generated by Doxygen 1.7.3 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>PCAtest.cpp</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><span class="comment">//===========================================================================</span>
<span class="comment"></span><span class="comment">//===========================================================================</span>


<span class="preprocessor">#include &lt;Rng/GlobalRng.h&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="_linear_model_8h.html" title="Linear models on a real vector space.">ReClaM/LinearModel.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="_p_c_a_8h.html" title="Principal Component Analysis (PCA)">ReClaM/PCA.h</a>&gt;</span>
<span class="comment">// #include &lt;ReClaM/Dataset.h&gt;</span>


<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)
{
    <span class="keywordtype">int</span> <a name="a0"></a><a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>;
    <span class="keywordtype">int</span> x, y;

    <span class="comment">// generate Gaussian</span>
    Array&lt;double&gt; data(26, 2);
    <span class="keywordflow">for</span> (i=0; i&lt;26; i++)
    {
        <span class="keywordtype">double</span> a = Rng::gauss();
        <span class="keywordtype">double</span> b = Rng::gauss();
        data(i, 0) = 18.0 * a + b + 39.5;
        data(i, 1) = a + 4.5 * b + 9.5;
    }

    <span class="comment">// construct PCA model for dimension reduction</span>
    <a name="_a1"></a><a class="code" href="class_affine_linear_map.html" title="The LinearMap class represents a simple affine linear model  where the matrix A and the vector b make...">AffineLinearMap</a> model(2, 1);
    <a name="_a2"></a><a class="code" href="class_p_c_a.html" title="&amp;quot;Principal Component Analysis&amp;quot; class for data compression.">PCA</a> optimizer;
    optimizer.<a name="a3"></a><a class="code" href="class_p_c_a.html#aa8c519f0057f1f0d3200363a97f5d7c6" title="basic initialization with default parameters">init</a>(model);

    <span class="comment">// train the model</span>
    printf(<span class="stringliteral">&quot;PCA training ...&quot;</span>); fflush(stdout);
    optimizer.<a name="a4"></a><a class="code" href="class_p_c_a.html#a718fc451781346de5c089080469b3afc" title="Performes one optimization step, for example a gradient descent step or an evolution cycle...">optimize</a>(model, data);
    printf(<span class="stringliteral">&quot; done.\n&quot;</span>);

    <span class="comment">// transform the data, that is, reduce the dimension from 2 to 1</span>
    Array&lt;double&gt; reduced(26, 1);
    model.<a name="a5"></a><a class="code" href="class_affine_linear_map.html#a9a286d0b02eb4aeed8590c0cd75d164b" title="Returns the model&amp;#39;s answer #output on the stimulus #input.">model</a>(data, reduced);

    <span class="comment">// ascii art visualization of the dataset and the reduced set</span>
    Array&lt;char&gt; twodim(79, 20);
    Array&lt;char&gt; onedim(79);
    onedim = 32;
    twodim = 32;
    <span class="keywordflow">for</span> (i=0; i&lt;26; i++)
    {
        x = (int)data(i, 0);
        y = (int)data(i, 1);
        <span class="keywordflow">if</span> (x &gt;= 0 &amp;&amp; x &lt; 79 &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; 40)
        {
            <span class="keywordflow">if</span> (twodim(x, y) == 32) twodim(x, y) = <span class="charliteral">&#39;a&#39;</span> + <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>;
            <span class="keywordflow">else</span> twodim(x, y) = <span class="charliteral">&#39;#&#39;</span>;
        }
        x = (int)(39.0 + reduced(i, 0));
        <span class="keywordflow">if</span> (x &gt;= 0 &amp;&amp; x &lt; 79)
        {
            <span class="keywordflow">if</span> (onedim(x) == 32) onedim(x) = <span class="charliteral">&#39;a&#39;</span> + <a class="code" href="_b_f_g_s_8cpp.html#ac23062089f3a5a2693cbb4ce7a75f1e5" title="Initializes some internal variables used by the BFGS algorithm, calculates the current error of the m...">i</a>;
            <span class="keywordflow">else</span> onedim(x) = <span class="charliteral">&#39;#&#39;</span>;
        }
    }
    printf(<span class="stringliteral">&quot;two dimensional input:\n&quot;</span>);
    printf(<span class="stringliteral">&quot;-------------------------------------------------------------------------------\n&quot;</span>);
    <span class="keywordflow">for</span> (y=0; y&lt;20; y++)
    {
        <span class="keywordflow">for</span> (x=0; x&lt;79; x++) printf(<span class="stringliteral">&quot;%c&quot;</span>, twodim(x, y));
        printf(<span class="stringliteral">&quot;\n&quot;</span>);
    }
    printf(<span class="stringliteral">&quot;-------------------------------------------------------------------------------\n&quot;</span>);
    printf(<span class="stringliteral">&quot;one dimensional output:\n&quot;</span>);
    printf(<span class="stringliteral">&quot;-------------------------------------------------------------------------------\n&quot;</span>);
    <span class="keywordflow">for</span> (x=0; x&lt;79; x++)
    {
        printf(<span class="stringliteral">&quot;%c&quot;</span>, onedim(x));
    }
    printf(<span class="stringliteral">&quot;\n&quot;</span>);
    printf(<span class="stringliteral">&quot;-------------------------------------------------------------------------------\n&quot;</span>);
    printf(<span class="stringliteral">&quot;\n\n&quot;</span>);

    <span class="comment">// lines below are for self-testing this example, please ignore</span>
    <span class="keywordflow">if</span> (fabs(reduced(0, 0) - 31.87569165) &lt;= 1e-6) exit(EXIT_SUCCESS);
    <span class="keywordflow">else</span> exit(EXIT_FAILURE);
}
</pre></div> </div>
</div>
</div>
</div>
</body></html>
