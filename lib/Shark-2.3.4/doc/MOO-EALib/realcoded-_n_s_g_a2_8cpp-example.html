<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MOO-EALib: realcoded-NSGA2.cpp</title>
<script type="text/javaScript" src="search/search.js"></script>
<link href="../css/main.css" rel="stylesheet" type="text/css"/>
</head>
<body id="type-b">

<div id="wrap">
<div id="header">
<div id="site-name">Shark Machine Learning Library</div>
<div id="poweredby">
<img style="width: 95%;" src="../images/SharkLogo.png"/>
</div>		
  
<ul id="nav">
  <li class="first"><a href="../index.html">About Shark</a></li>
  <li><a href="#">Sourceforge</a>
  
  <ul>
    <li class="first"><a href="http://shark-project.sourceforge.net">Project Summary</a></li>
    <li><a href="http://sourceforge.net/projects/shark-project/files/">Downloads</a></li>
    <li><a href="http://sourceforge.net/projects/shark-project/develop">Subversion Repository</a></li>
  </ul>
  
</li>
<li class="first"><a href="../GettingStarted.html">Getting Started</a>
<li class="first"><a href="../Tutorials.html">Tutorials</a>
<li class="first"><a href="../FAQ.html">FAQ</a>

<li class="first"><a href="#">Main Modules</a>
<ul>
  <li class="first"><a href="../ReClaM/index.html">ReClaM</a>
  <li class="first"><a href="../EALib/index.html">EALib</a>
  <li class="first"><a href="../MOO-EALib/index.html">MOO-EALib</a>
  <li class="first"><a href="../Fuzzy/index.html">Fuzzy</a>
</ul>
</li>
<li class="first"><a href="#">Tools</a>
<ul>
  <li class="first"><a href="../Mixture/index.html">Mixture</a>
  <li><a href="../Array/index.html">Array</a>
  <li><a href="../Rng/index.html">Rng</a>
  <li><a href="../LinAlg/index.html">LinAlg</a>
  <li class="last"><a href="../FileUtil/index.html">FileUtil</a>		    
</ul>
</li>
</ul>
</div>

<!--<div id="header">
<div id="site-name">Shark Machine Learning Library</div>
  <ul id="nav">
    <li><a href="../index.html"><span>Shark&nbsp;Main&nbsp;Page</span></a></li>
    <li><a href="../Array/index.html"><span>Array</span></a></li>
    <li><a href="../Rng/index.html"><span>Rng</span></a></li>
    <li><a href="../LinAlg/index.html"><span>LinAlg</span></a></li>
    <li><a href="../FileUtil/index.html"><span>FileUtil</span></a></li>
    <li><a href="../EALib/index.html"><span>EALib</span></a></li>
    <li><a href="../MOO-EALib/index.html"><span>MOO-EALib</span></a></li>
    <li class="active"><a href="../ReClaM/index.html"><span>ReClaM</span></a></li>
    <li><a href="../Fuzzy/index.html"><span>Fuzzy</span></a></li>
    <li><a href="../Mixture/index.html"><span>Mixture</span></a></li>
    <li><a href="../tutorials/index.html"><span>Tutorials</span></a></li>
    <li><a href="../faq/index.html"><span>FAQ</span></a></li>
  </ul>
 </div> -->
<!-- Generated by Doxygen 1.7.3 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>realcoded-NSGA2.cpp</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><span class="comment">// ======================================================================</span>
<span class="comment"></span><span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<span class="preprocessor">#include &lt;stdio.h&gt;</span>

<span class="preprocessor">#include &lt;Array/Array.h&gt;</span>
<span class="preprocessor">#include &lt;FileUtil/Params.h&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="_test_function_8h.html" title="Collection of benchmark fitness functions for algorithm analysis.">MOO-EALib/TestFunction.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="_population_m_o_o_8h.html" title="Population of individuals with vector-valued fitness.">MOO-EALib/PopulationMOO.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="_archive_m_o_o_8h.html" title="External Archive of candidates for pareto optimality.">MOO-EALib/ArchiveMOO.h</a>&gt;</span>
<span class="preprocessor">#include &lt;SharkDefs.h&gt;</span>

<span class="keyword">using namespace </span>std;

<span class="comment">// My own derived class for managing my configuration files:</span>
<span class="comment">//</span>
<span class="keyword">class </span>MyParams : <span class="keyword">public</span> Params
{
<span class="keyword">public</span>:

    MyParams(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) : Params(argc, argv)
    {}

    ~MyParams()
    {}

    <span class="keywordtype">void</span> readParams()
    {
        <span class="comment">// Call the main program with parameters &quot;-conf [filename]&quot;</span>
        <span class="keywordflow">if</span> (scanFrom(confFile.c_str())) {
            std::cout &lt;&lt; <span class="stringliteral">&quot;Name of the configuration file: &quot;</span> &lt;&lt; confFile &lt;&lt; std::endl;
        }
        <span class="keywordflow">else</span> {
          <span class="keywordflow">throw</span> SHARKEXCEPTION(<span class="stringliteral">&quot;No valid configuration file given! &quot;</span>);
        }
    }

    <span class="keywordtype">void</span> io(std::istream&amp; is, std::ostream&amp; os, FileUtil::iotype type)
    {
        FileUtil::io(is, os, <span class="stringliteral">&quot;Task &quot;</span>        , Task     , 1u     , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;ArchiveSize &quot;</span> , ArchiveSize , 100u    , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;Dimension &quot;</span>   , Dimension   , 10u , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;Iterations &quot;</span>  , Iterations  , 500u    , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;DisplInt &quot;</span>    , DisplInt    , 100u    , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;MinInit &quot;</span>     , MinInit      , -25.   , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;MaxInit &quot;</span>     , MaxInit      , 25.        , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;Seed  &quot;</span>       , Seed     , 1u     , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;rotBasis &quot;</span>    , rotBasis     , <span class="keyword">true</span>   , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;rpcon1 &quot;</span>      , rpcon1       , 1000.  , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;rpcon2 &quot;</span>      , rpcon2       , 2.     , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;nc &quot;</span>       , nc      , 20u    , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;nm &quot;</span>       , nm      , 20.    , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;pbc &quot;</span>      , pbc     , 0.5    , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;pc &quot;</span>       , pc      , 0.9    , type);
        FileUtil::io(is, os, <span class="stringliteral">&quot;pm &quot;</span>       , pm      , 1. / Dimension, type);
    }

    <span class="comment">// Method to show the current content of the class variable:</span>
    <span class="keywordtype">void</span> monitor()
    {
        std::cout &lt;&lt; <span class="stringliteral">&quot;Task        &quot;</span> &lt;&lt; Task         &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;ArchiveSize &quot;</span> &lt;&lt; ArchiveSize  &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;Dimension   &quot;</span> &lt;&lt; Dimension    &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;Iterations  &quot;</span> &lt;&lt; Iterations   &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;DisplInt    &quot;</span> &lt;&lt; DisplInt     &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;MinInit     &quot;</span> &lt;&lt; MinInit      &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;MaxInit     &quot;</span> &lt;&lt; MaxInit      &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;rotBasis    &quot;</span> &lt;&lt; rotBasis     &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;rpcon1      &quot;</span> &lt;&lt; rpcon1       &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;rpcon2      &quot;</span> &lt;&lt; rpcon2       &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;Seed        &quot;</span> &lt;&lt; Seed     &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;nc          &quot;</span> &lt;&lt; nc       &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;nm          &quot;</span> &lt;&lt; nm       &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;pc          &quot;</span> &lt;&lt; pc       &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;pbc         &quot;</span> &lt;&lt; pbc      &lt;&lt; std::endl;
        std::cout &lt;&lt; <span class="stringliteral">&quot;pm          &quot;</span> &lt;&lt; pm       &lt;&lt; std::endl;
    }

    <span class="keywordtype">unsigned</span> Seed;
    <span class="keywordtype">unsigned</span> ArchiveSize;
    <span class="keywordtype">unsigned</span> Dimension;
    <span class="keywordtype">unsigned</span> Iterations;
    <span class="keywordtype">unsigned</span> Task;
    <span class="keywordtype">unsigned</span> DisplInt;
    <span class="keywordtype">double</span>  MinInit;
    <span class="keywordtype">double</span>  MaxInit;
    <span class="keywordtype">bool</span>    rotBasis;
    <span class="keywordtype">double</span>  rpcon1;
    <span class="keywordtype">double</span>  rpcon2;
    <span class="keywordtype">unsigned</span> nc;
    <span class="keywordtype">double</span>  pc;
    <span class="keywordtype">double</span>  pbc;
    <span class="keywordtype">double</span>   nm;
    <span class="keywordtype">double</span>   pm;
};

<span class="keyword">inline</span> <span class="keywordtype">void</span> calcFitness(<a name="_a0"></a><a class="code" href="class_individual_m_o_o.html" title="Multi objective version of an individual consisting of chromosomes.">IndividualMOO</a> &amp;i,
                        <span class="keywordtype">unsigned</span> Task,
                        vector&lt;double&gt;&amp; Min,
                        vector&lt;double&gt;&amp; Max,
                        Array&lt;double&gt; &amp; Basis,
                        <span class="keywordtype">double</span> rotparco1 = 1000.,
                        <span class="keywordtype">double</span> rotparco2 = 2.,
                        <span class="keywordtype">bool</span> initBasis = <span class="keyword">false</span>
                       )
{
    <span class="keywordtype">double</span> f1 = 0, f2 = 0;<span class="keywordtype">unsigned</span> j;
    ChromosomeT&lt; double &gt;&amp; dblchrom = <span class="keyword">dynamic_cast&lt;</span> ChromosomeT&lt; double &gt;&amp; <span class="keyword">&gt;</span>(i[ 0 ]);
    <span class="keywordflow">switch</span> (Task) {
    <span class="keywordflow">case</span> 1:
        Basis = 0; <span class="keywordflow">for</span> (j = 0;j &lt; Basis.dim(0);j++) Basis(j, j) = 1;
        f1 = <a name="a1"></a><a class="code" href="_m_o_o_test_functions_8h.html#a96a10977faedd99f62156039cc69e3c4">RotParF1</a>(dblchrom, Basis, Min, Max, 1.);
        f2 = <a name="a2"></a><a class="code" href="_m_o_o_test_functions_8h.html#aeb1b86efa9c35b8269950736a2e0b291">RotParF2</a>(dblchrom, Basis, Min, Max, 1., rotparco2);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 2:
        f1 = <a name="a3"></a><a class="code" href="_m_o_o_test_functions_8h.html#a9ff93e4f9cb5ab2a9c9b33c0cf63aab7">FonsecaConcaveF1</a>(dblchrom);
        f2 = <a name="a4"></a><a class="code" href="_m_o_o_test_functions_8h.html#a060c9a516a86f318dbb8246209713b93">FonsecaConcaveF2</a>(dblchrom);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 3:
        f1 = <a name="a5"></a><a class="code" href="_m_o_o_test_functions_8h.html#a8ab458ba027144694531c3489f5cf3f0">MessacConcaveF1</a>(dblchrom);
        f2 = <a name="a6"></a><a class="code" href="_m_o_o_test_functions_8h.html#aea5597e66f67945901739187614ee4fc">MessacConcaveF2</a>(dblchrom);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 4:
        f1 = <a name="a7"></a><a class="code" href="_m_o_o_test_functions_8h.html#ad8edee30753eb841ae1a46ede0ae341b">ZDT1F1</a>(dblchrom);
        f2 = <a name="a8"></a><a class="code" href="_m_o_o_test_functions_8h.html#a9059c8fe074201d312cea82a9c6c5b1f">ZDT1F2</a>(dblchrom);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 5:
        f1 = <a name="a9"></a><a class="code" href="_m_o_o_test_functions_8h.html#ae47e2e676407f00f268259c93cbba839">ZDT2F1</a>(dblchrom);
        f2 = <a name="a10"></a><a class="code" href="_m_o_o_test_functions_8h.html#a47fd28292cb671899b4f09ff5dc0cb7c">ZDT2F2</a>(dblchrom);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 6:
        f1 = <a name="a11"></a><a class="code" href="_m_o_o_test_functions_8h.html#ab3eaad381b97869d6c81573f3b010564">ZDT3F1</a>(dblchrom);
        f2 = <a name="a12"></a><a class="code" href="_m_o_o_test_functions_8h.html#a2a1fd416e6d0074630ab2e53d46b3e27">ZDT3F2</a>(dblchrom);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 7:
        f1 = <a name="a13"></a><a class="code" href="_m_o_o_test_functions_8h.html#a0e3f5ce4f5eae8663ac14c1d1c83e097">ZDT4F1</a>(dblchrom);
        f2 = <a name="a14"></a><a class="code" href="_m_o_o_test_functions_8h.html#ae44308478562202afedc703665e4a665">ZDT4F2</a>(dblchrom);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 8:
        f1 = <a name="a15"></a><a class="code" href="_m_o_o_test_functions_8h.html#a0eb22f88551d332cb9c520560b021336">ZDT6F1</a>(dblchrom);
        f2 = <a name="a16"></a><a class="code" href="_m_o_o_test_functions_8h.html#aebb530d498a68be2dff45d1f0e4f8827">ZDT6F2</a>(dblchrom);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 9:
        <span class="keywordflow">if</span> (initBasis) <a name="a17"></a><a class="code" href="_m_o_o_test_functions_8h.html#aee4b8103a79fa97f0584aea0c7468680">generateBasis</a>(dblchrom.size(), Basis);
        f1 = <a class="code" href="_m_o_o_test_functions_8h.html#a96a10977faedd99f62156039cc69e3c4">RotParF1</a>(dblchrom, Basis, Min, Max, rotparco1);
        f2 = <a class="code" href="_m_o_o_test_functions_8h.html#aeb1b86efa9c35b8269950736a2e0b291">RotParF2</a>(dblchrom, Basis, Min, Max, rotparco1, rotparco2);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 10:
        <span class="keywordflow">if</span> (initBasis) <a class="code" href="_m_o_o_test_functions_8h.html#aee4b8103a79fa97f0584aea0c7468680">generateBasis</a>(dblchrom.size(), Basis);
        f1 = <a name="a18"></a><a class="code" href="_m_o_o_test_functions_8h.html#abef88d7ff411bae027585f170b205f42">DebRotatedF1</a>(dblchrom, Basis);
        f2 = <a name="a19"></a><a class="code" href="_m_o_o_test_functions_8h.html#aef5eb9b6a7236ed61063c3679dd86173">DebRotatedF2</a>(dblchrom, Basis);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 11:
        <span class="keywordflow">if</span> (initBasis) <a class="code" href="_m_o_o_test_functions_8h.html#aee4b8103a79fa97f0584aea0c7468680">generateBasis</a>(dblchrom.size(), Basis);
        f1 = <a name="a20"></a><a class="code" href="_m_o_o_test_functions_8h.html#ab32de3fd0cb5a76f7ff7dc9fa0c33148">RotCigarF1</a>(dblchrom, Basis, Min, Max, rotparco1);
        f2 = <a name="a21"></a><a class="code" href="_m_o_o_test_functions_8h.html#a8546126421f0313739b5d367c42d5a66">RotCigarF2</a>(dblchrom, Basis, Min, Max, rotparco1, rotparco2);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 12:
        <span class="keywordflow">if</span> (initBasis) <a class="code" href="_m_o_o_test_functions_8h.html#aee4b8103a79fa97f0584aea0c7468680">generateBasis</a>(dblchrom.size(), Basis);
        f1 = <a name="a22"></a><a class="code" href="_m_o_o_test_functions_8h.html#a604f882c6d04b622438868092ffcbca9">RotTabletF1</a>(dblchrom, Basis, Min, Max, rotparco1);
        f2 = <a name="a23"></a><a class="code" href="_m_o_o_test_functions_8h.html#a64d8adf4e8719becafc0cf258b0f489c">RotTabletF2</a>(dblchrom, Basis, Min, Max, rotparco1, rotparco2);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
        std::cerr &lt;&lt; <span class="stringliteral">&quot;unknown task:&quot;</span> &lt;&lt; Task &lt;&lt; std::endl;
        <span class="keywordflow">break</span>;
    }

    i.<a name="a24"></a><a class="code" href="class_individual_m_o_o.html#aa5572839618946088b7dafa7730cd421">setMOOFitnessValues</a>(f1, f2);
}

<span class="comment">// main program</span>
<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])
{
    <span class="keywordtype">unsigned</span> i, ii, t;

    MyParams param(argc, argv);

    param.setDefault();
    <span class="comment">//param.readParams();</span>

    <span class="keywordflow">if</span> (argc &gt; 1) {
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; argc; ++i)
            <span class="keywordflow">if</span> (strcmp(argv[ i ], <span class="stringliteral">&quot;-Seed&quot;</span>) == 0 &amp;&amp; i + 1 &lt; argc)
                param.Seed = atoi(argv[ i+1 ]);
    }

    param.monitor();

    Array&lt;double&gt; B(param.Dimension, param.Dimension);
    B = 0; <span class="keywordflow">for</span> (i = 0;i &lt; B.dim(0);i++) B(i, i) = 1;

    <span class="comment">// initialize random number generator</span>
    Rng::seed(param.Seed);

    Array&lt;double&gt;   pf, sf;

    cout &lt;&lt; endl;
    <span class="keywordflow">switch</span> (param.Task) {
    <span class="keywordflow">case</span> 1:
        cout &lt;&lt; <span class="stringliteral">&quot;Sphere&quot;</span> &lt;&lt; endl;
        cout &lt;&lt; <span class="stringliteral">&quot;shift &quot;</span> &lt;&lt; param.rpcon2 &lt;&lt; endl;
        <a name="a25"></a><a class="code" href="_m_o_o_test_functions_8h.html#a4151cc279fa38ccab4d6fdc8bf8a2918">RotParSampleFront</a>(pf, param.Dimension, 1., param.rpcon2);
        <span class="keywordflow">if</span> (param.Dimension == 2) <a name="a26"></a><a class="code" href="_m_o_o_test_functions_8h.html#a2b68b94750574d8b33bdd8f9d250d8a7">RotParSample</a>(sf, param.Dimension, 1., param.rpcon2);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 2:
        cout &lt;&lt; <span class="stringliteral">&quot;FonsecaConcave&quot;</span> &lt;&lt; endl;
        <span class="keywordflow">if</span> (param.MinInit &lt; -4. || param.MaxInit &gt; 4.) {
            cerr &lt;&lt; <span class="stringliteral">&quot;Warning: parameter initialization is out of bounds, resetting ...&quot;</span> &lt;&lt; endl;
            param.MinInit = -4.; param.MaxInit = 4.;
        }
        <a name="a27"></a><a class="code" href="_m_o_o_test_functions_8h.html#a5ed799cc795654a3401ec277532bcb04">FonsecaConcaveSampleFront</a>(pf, param.Dimension);
        <span class="keywordflow">if</span> (param.Dimension == 2) <a name="a28"></a><a class="code" href="_m_o_o_test_functions_8h.html#af3ddb421b38179b53d690a7c28e781ad">FonsecaConcaveSample</a>(sf, param.Dimension);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 3:
        cout &lt;&lt; <span class="stringliteral">&quot;MessacConcave&quot;</span> &lt;&lt; endl;
        <span class="keywordflow">if</span> (param.Dimension == 2)
            <a name="a29"></a><a class="code" href="_m_o_o_test_functions_8h.html#a9952615079f2130ff59edeac9b099f02">MessacConcaveSample</a>(sf, param.Dimension, param.MinInit, param.MaxInit);
        <span class="keywordflow">if</span> (param.Dimension &gt; 1) {
          <span class="keywordflow">throw</span> SHARKEXCEPTION(<span class="stringliteral">&quot;Warning: pareto sampling is not implemented for dim &gt; 1 ...&quot;</span>);
        }
        <span class="keywordflow">if</span> (param.Dimension == 1)
            <a name="a30"></a><a class="code" href="_m_o_o_test_functions_8h.html#aecf43169897aeb5552ceb10f26f3beb6">MessacConcaveSampleFront</a>(sf, param.Dimension, param.MinInit, param.MaxInit);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 4:
        cout &lt;&lt; <span class="stringliteral">&quot;ZDT1&quot;</span> &lt;&lt; endl;
        <a name="a31"></a><a class="code" href="_m_o_o_test_functions_8h.html#abc9a42ec14f877012e41c7b5dfcf6f62">ZDT1SampleFront</a>(pf);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 5:
        cout &lt;&lt; <span class="stringliteral">&quot;ZDT2&quot;</span> &lt;&lt; endl;
        <a name="a32"></a><a class="code" href="_m_o_o_test_functions_8h.html#a0baec82c23af35bb958efb58a7611633">ZDT2SampleFront</a>(pf);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 6:
        cout &lt;&lt; <span class="stringliteral">&quot;ZDT3&quot;</span> &lt;&lt; endl;
        <a name="a33"></a><a class="code" href="_m_o_o_test_functions_8h.html#a00d89ed5f59f44d7dfe9b53e54676e44">ZDT3SampleFront</a>(pf);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 7:
        cout &lt;&lt; <span class="stringliteral">&quot;ZDT4&quot;</span> &lt;&lt; endl;
        <a name="a34"></a><a class="code" href="_m_o_o_test_functions_8h.html#ad2109960ad53d89287964fe195b8fb6b">ZDT4SampleFront</a>(pf);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 8:
        cout &lt;&lt; <span class="stringliteral">&quot;ZDT6&quot;</span> &lt;&lt; endl;
        <a name="a35"></a><a class="code" href="_m_o_o_test_functions_8h.html#a81b15728169671aff9e263542c9aaed2">ZDT6SampleFront</a>(pf);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 9:
        cout &lt;&lt; <span class="stringliteral">&quot;Rotated Paraboloid&quot;</span> &lt;&lt; endl;
        cout &lt;&lt; <span class="stringliteral">&quot;rotated Basis &quot;</span> &lt;&lt; param.rotBasis &lt;&lt; <span class="stringliteral">&quot;, scaling &quot;</span> &lt;&lt; param.rpcon1 &lt;&lt; <span class="stringliteral">&quot;, shift &quot;</span> &lt;&lt; param.rpcon2 &lt;&lt; endl;
        <a class="code" href="_m_o_o_test_functions_8h.html#a4151cc279fa38ccab4d6fdc8bf8a2918">RotParSampleFront</a>(pf, param.Dimension, param.rpcon1, param.rpcon2);
        <span class="keywordflow">if</span> (param.Dimension == 2)
            <a class="code" href="_m_o_o_test_functions_8h.html#a2b68b94750574d8b33bdd8f9d250d8a7">RotParSample</a>(sf, param.Dimension, param.rpcon1, param.rpcon2);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 10:
        cout &lt;&lt; <span class="stringliteral">&quot;Deb&#39;s Rotated test function&quot;</span> &lt;&lt; endl;
        cout &lt;&lt; <span class="stringliteral">&quot;rotated Basis &quot;</span> &lt;&lt; param.rotBasis &lt;&lt; endl;
        <a name="a36"></a><a class="code" href="_m_o_o_test_functions_8h.html#a96aecc7ea811684acae3301844530bd2">DebRotatedSampleFront</a>(pf, param.Dimension);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 11:
        cout &lt;&lt; <span class="stringliteral">&quot;Rotated Cigar&quot;</span> &lt;&lt; endl;
        cout &lt;&lt; <span class="stringliteral">&quot;rotated Basis &quot;</span> &lt;&lt; param.rotBasis &lt;&lt; <span class="stringliteral">&quot;, scaling &quot;</span> &lt;&lt; param.rpcon1 &lt;&lt; <span class="stringliteral">&quot;, shift &quot;</span> &lt;&lt; param.rpcon2 &lt;&lt; endl;
        <a name="a37"></a><a class="code" href="_m_o_o_test_functions_8h.html#ae33f8ab9ba0975ed279c5a622ae989a2">RotCigarSampleFront</a>(pf, param.Dimension, param.rpcon1, param.rpcon2);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> 12:
        cout &lt;&lt; <span class="stringliteral">&quot;Rotated Tablet&quot;</span> &lt;&lt; endl;
        cout &lt;&lt; <span class="stringliteral">&quot;rotated Basis &quot;</span> &lt;&lt; param.rotBasis &lt;&lt; <span class="stringliteral">&quot;, scaling &quot;</span> &lt;&lt; param.rpcon1 &lt;&lt; <span class="stringliteral">&quot;, shift &quot;</span> &lt;&lt; param.rpcon2 &lt;&lt; endl;
        <a name="a38"></a><a class="code" href="_m_o_o_test_functions_8h.html#a9983ee8ef6e95fc439cb4eea5008e92c">RotTabletSampleFront</a>(pf, param.Dimension, param.rpcon1, param.rpcon2);
        <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <span class="keywordflow">throw</span> SHARKEXCEPTION(<span class="stringliteral">&quot;Unknown task &quot;</span>);
    }

    <span class="keywordtype">char</span> filename[500];

    <span class="keywordflow">if</span> (param.Task != 3 || param.Dimension == 1) {
        sprintf(filename, <span class="stringliteral">&quot;pareto_%d_%d.arv&quot;</span>, param.Task, param.Dimension);
        ofstream PF(filename);
        <span class="keywordflow">for</span> (ii = 0;ii &lt; pf.dim(0);ii++) {
            PF &lt;&lt; pf(ii, 0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; pf(ii, 1) &lt;&lt; endl;
            <span class="comment">//cerr&lt;&lt; ii &lt;&lt; &quot; &quot; &lt;&lt; pf(ii,0) &lt;&lt; &quot; &quot; &lt;&lt; pf(ii,1) &lt;&lt; endl;</span>
        }
        PF.close();
    }

    <span class="keywordflow">if</span> ((param.Task &lt; 4 || param.Task == 9) &amp;&amp; param.Dimension == 2) {
        sprintf(filename, <span class="stringliteral">&quot;sample_%d_%d.arv&quot;</span>, param.Task, param.Dimension);
        ofstream SF(filename);
        <span class="keywordflow">for</span> (ii = 0;ii &lt; sf.dim(0);ii++) {
            SF &lt;&lt; sf(ii, 0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; sf(ii, 1) &lt;&lt; endl;
            <span class="comment">//cerr&lt;&lt; ii &lt;&lt; &quot; &quot; &lt;&lt; pf(ii,0) &lt;&lt; &quot; &quot; &lt;&lt; pf(ii,1) &lt;&lt; endl;</span>
        }
        SF.close();
    }

    <span class="comment">// define populations</span>
    <a name="_a39"></a><a class="code" href="class_population_m_o_o.html" title="Population of individuals with vector-valued fitness.">PopulationMOO</a> parents(param.ArchiveSize, ChromosomeT&lt; double &gt;(param.Dimension));
    <a class="code" href="class_population_m_o_o.html" title="Population of individuals with vector-valued fitness.">PopulationMOO</a> offsprings(param.ArchiveSize, ChromosomeT&lt; double &gt;(param.Dimension));

    <span class="comment">// Set Minimization Task</span>
    parents   .setMinimize();
    offsprings.setMinimize();

    <span class="comment">// Set No of Objective funstions</span>
    parents   .setNoOfObj(2);
    offsprings.setNoOfObj(2);

    <a name="_a40"></a><a class="code" href="class_archive_m_o_o.html" title="Archive of candidates for pareto optimality.">ArchiveMOO</a> archive(param.ArchiveSize);
    archive.minimize();
    archive.setMaxArchive(param.ArchiveSize);

    vector&lt;double&gt; lower(param.Dimension), upper(param.Dimension);

    <span class="keywordflow">for</span> (i = 0; i &lt; lower.size(); ++i) {
        lower[i] = param.MinInit;
        upper[i] = param.MaxInit;
    }

    <span class="comment">// initialize all chromosomes of parent population</span>
    <span class="keywordflow">for</span> (i = 0; i &lt; parents.size(); ++i)
        <span class="keyword">dynamic_cast&lt;</span> ChromosomeT&lt; double &gt;&amp; <span class="keyword">&gt;</span>(parents[ i ][ 0 ]).initialize(param.MinInit, param.MaxInit);

    <span class="comment">// evaluate parents</span>
    <span class="keywordflow">for</span> (i = 0; i &lt; parents.size(); ++i)
        calcFitness(parents[ i ], param.Task, lower, upper, B, param.rpcon1, param.rpcon2, param.rotBasis);

    parents.crowdedDistance();

    <span class="comment">// iterate</span>
    <span class="keywordflow">for</span> (t = 1; t &lt; param.Iterations + 1; ++t) {

        <span class="keywordflow">if</span> (t % param.DisplInt == 1)
            cout &lt;&lt; <span class="stringliteral">&quot;Generation: &quot;</span> &lt;&lt; t &lt;&lt; endl;

        <span class="comment">// copy parents to offsprings</span>
        offsprings.selectBinaryTournamentMOO(parents);

        <span class="comment">// recombine by crossing over two parents</span>
        <span class="keywordflow">for</span> (i = 0; i &lt; offsprings.size(); i += 2)
            <span class="keywordflow">if</span> (Rng::coinToss(param.pc))
                <span class="keyword">dynamic_cast&lt;</span> ChromosomeT&lt; double &gt;&amp; <span class="keyword">&gt;</span>(offsprings[i][0]).SBX(<span class="keyword">dynamic_cast&lt;</span> ChromosomeT&lt; double &gt;&amp; <span class="keyword">&gt;</span>(offsprings[i+1][0]), lower, upper, param.nc, param.pbc);

        <span class="comment">// mutate by flipping bits and evaluate objective function</span>
        <span class="keywordflow">for</span> (i = 0; i &lt; offsprings.size(); ++i) {
            <span class="comment">// modify</span>
            <span class="keyword">dynamic_cast&lt;</span> ChromosomeT&lt; double &gt;&amp; <span class="keyword">&gt;</span>(offsprings[i][0]).mutatePolynomial(param.MinInit, param.MaxInit, param.nm, param.pm);

            <span class="comment">// evaluate objective function</span>
            calcFitness(offsprings[ i ], param.Task, lower, upper, B, param.rpcon1, param.rpcon2);
        }

        <span class="comment">// Selection</span>
        parents.selectCrowdedMuPlusLambda(offsprings);

        <span class="keywordflow">if</span> (!(t % 10)) {
            archive.cleanArchive();
            <span class="keywordflow">for</span> (i = 0; i &lt; parents.size(); i++)
                archive.addArchive(parents[i]);
            archive.nonDominatedSolutions();
        }
    } <span class="comment">// Iteration</span>
    cout &lt;&lt; <span class="stringliteral">&quot;Generation: &quot;</span> &lt;&lt; t &lt;&lt; endl;

    <span class="comment">// Data Output</span>
    archive.cleanArchive();
    <span class="keywordflow">for</span> (ii = 0; ii &lt; param.ArchiveSize; ii++) {
        archive.addArchive(parents[ ii ]);
    }

    archive.nonDominatedSolutions();

    cout &lt;&lt; endl;
    sprintf(filename, <span class="stringliteral">&quot;nsga2_%d_%d_%d_%d_%d.arv&quot;</span>, param.Task, param.ArchiveSize, param.Dimension, param.Iterations, param.Seed);
    cout    &lt;&lt; <span class="stringliteral">&quot;Size of the Archive: &quot;</span>  &lt;&lt; archive.size()
    &lt;&lt; <span class="stringliteral">&quot;, filename of archive: &quot;</span> &lt;&lt; filename &lt;&lt; endl &lt;&lt; endl;

    archive.saveArchiveGPT(filename);

    <span class="comment">/*</span>
<span class="comment">    for(i=0;i&lt; archive.size();i++)</span>
<span class="comment">    {   </span>
<span class="comment">        for(ii=0;ii&lt;(uint)archive.readArchive(i)[0].size();ii++)</span>
<span class="comment">            std::cout &lt;&lt; (static_cast&lt;ChromosomeT&lt;double&gt;&amp;&gt;(archive.readArchive( i )[0]))[ii] &lt;&lt; &quot; &quot; &lt;&lt; std::flush;</span>
<span class="comment">        std::cout &lt;&lt; std::endl;</span>
<span class="comment">    }</span>
<span class="comment">    */</span>

    <span class="keywordflow">return</span> 0;
}

</pre></div> </div>
</div>
</div>
</div>
</body></html>
