<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Array: ReadArray.cpp Source File</title>
<script type="text/javaScript" src="search/search.js"></script>
<link href="../css/main.css" rel="stylesheet" type="text/css"/>
</head>
<body id="type-b">

<div id="wrap">
<div id="header">
<div id="site-name">Shark Machine Learning Library</div>
<div id="poweredby">
<img style="width: 95%;" src="../images/SharkLogo.png"/>
</div>		
  
<ul id="nav">
  <li class="first"><a href="../index.html">About Shark</a></li>
  <li><a href="#">Sourceforge</a>
  
  <ul>
    <li class="first"><a href="http://shark-project.sourceforge.net">Project Summary</a></li>
    <li><a href="http://sourceforge.net/projects/shark-project/files/">Downloads</a></li>
    <li><a href="http://sourceforge.net/projects/shark-project/develop">Subversion Repository</a></li>
  </ul>
  
</li>
<li class="first"><a href="../GettingStarted.html">Getting Started</a>
<li class="first"><a href="../Tutorials.html">Tutorials</a>
<li class="first"><a href="../FAQ.html">FAQ</a>

<li class="first"><a href="#">Main Modules</a>
<ul>
  <li class="first"><a href="../ReClaM/index.html">ReClaM</a>
  <li class="first"><a href="../EALib/index.html">EALib</a>
  <li class="first"><a href="../MOO-EALib/index.html">MOO-EALib</a>
  <li class="first"><a href="../Fuzzy/index.html">Fuzzy</a>
</ul>
</li>
<li class="first"><a href="#">Tools</a>
<ul>
  <li class="first"><a href="../Mixture/index.html">Mixture</a>
  <li><a href="../Array/index.html">Array</a>
  <li><a href="../Rng/index.html">Rng</a>
  <li><a href="../LinAlg/index.html">LinAlg</a>
  <li class="last"><a href="../FileUtil/index.html">FileUtil</a>		    
</ul>
</li>
</ul>
</div>

<!--<div id="header">
<div id="site-name">Shark Machine Learning Library</div>
  <ul id="nav">
    <li><a href="../index.html"><span>Shark&nbsp;Main&nbsp;Page</span></a></li>
    <li><a href="../Array/index.html"><span>Array</span></a></li>
    <li><a href="../Rng/index.html"><span>Rng</span></a></li>
    <li><a href="../LinAlg/index.html"><span>LinAlg</span></a></li>
    <li><a href="../FileUtil/index.html"><span>FileUtil</span></a></li>
    <li><a href="../EALib/index.html"><span>EALib</span></a></li>
    <li><a href="../MOO-EALib/index.html"><span>MOO-EALib</span></a></li>
    <li class="active"><a href="../ReClaM/index.html"><span>ReClaM</span></a></li>
    <li><a href="../Fuzzy/index.html"><span>Fuzzy</span></a></li>
    <li><a href="../Mixture/index.html"><span>Mixture</span></a></li>
    <li><a href="../tutorials/index.html"><span>Tutorials</span></a></li>
    <li><a href="../faq/index.html"><span>FAQ</span></a></li>
  </ul>
 </div> -->
<!-- Generated by Doxygen 1.7.3 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>ReadArray.cpp</h1>  </div>
</div>
<div class="contents">
<a href="_read_array_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;list&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;SharkDefs.h&gt;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;Array/ArrayOp.h&gt;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;Array/ArrayIo.h&gt;</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="keyword">using namespace </span>std;
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="comment">//===========================================================================</span>
<a name="l00075"></a>00075 <span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> skipuntil(istream&amp; is, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; token)
<a name="l00076"></a>00076 {
<a name="l00077"></a>00077     <span class="keywordflow">if</span> (token.length() == 0) {
<a name="l00078"></a>00078         <span class="keywordflow">return</span>;
<a name="l00079"></a>00079     }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081     <span class="keywordtype">char</span>   c;
<a name="l00082"></a>00082     <span class="keywordtype">string</span> cmp;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084     <span class="comment">//</span>
<a name="l00085"></a>00085     <span class="comment">// read first chunk of characters</span>
<a name="l00086"></a>00086     <span class="comment">//</span>
<a name="l00087"></a>00087     <span class="keywordflow">while</span> (cmp.length() &lt; token.length() &amp;&amp; is &amp;&amp; ! is.eof()) {
<a name="l00088"></a>00088         is.get(c);
<a name="l00089"></a>00089         cmp += c;
<a name="l00090"></a>00090     }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092     <span class="comment">//</span>
<a name="l00093"></a>00093     <span class="comment">// loop until token found</span>
<a name="l00094"></a>00094     <span class="comment">//</span>
<a name="l00095"></a>00095     <span class="keywordflow">while</span> (!(cmp == token) &amp;&amp; is &amp;&amp; ! is.eof()) {
<a name="l00096"></a>00096         is.get(c);
<a name="l00097"></a>00097         cmp.erase(0, 1);
<a name="l00098"></a>00098         cmp += c;
<a name="l00099"></a>00099     }
<a name="l00100"></a>00100 }
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 <span class="comment">//===========================================================================</span>
<a name="l00144"></a>00144 <span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> nexttoken(istream&amp; is, <span class="keywordtype">string</span>&amp; token,
<a name="l00145"></a>00145                       <span class="keyword">const</span> list&lt; string &gt;&amp; tokenlist,
<a name="l00146"></a>00146                       <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; ignore = <span class="stringliteral">&quot; \t\r\n\v\f&quot;</span>)
<a name="l00147"></a>00147 {
<a name="l00148"></a>00148     <span class="keywordtype">char</span> c;          <span class="comment">// the current character</span>
<a name="l00149"></a>00149     <span class="keywordtype">bool</span> sign;       <span class="comment">// +/-</span>
<a name="l00150"></a>00150     <span class="keywordtype">bool</span> point;      <span class="comment">// decimal point</span>
<a name="l00151"></a>00151     <span class="keywordtype">bool</span> digit;      <span class="comment">// digit greater than zero</span>
<a name="l00152"></a>00152     <span class="keywordtype">bool</span> exp;        <span class="comment">// exponential part, introduced by &quot;e&quot; after the decimal</span>
<a name="l00153"></a>00153     <span class="comment">// point</span>
<a name="l00154"></a>00154     <span class="keywordtype">bool</span> expsign;    <span class="comment">// sign in the exponential part</span>
<a name="l00155"></a>00155     <span class="keywordtype">bool</span> expdigit;   <span class="comment">// digit in the exponential part</span>
<a name="l00156"></a>00156     <span class="keywordtype">bool</span> number;     <span class="comment">// digit greater than zero/+/-/decimal point</span>
<a name="l00157"></a>00157 
<a name="l00158"></a>00158     <span class="comment">// Skip leading &quot;ignore&quot; characters:</span>
<a name="l00159"></a>00159     <span class="keywordflow">while</span> (is.good() &amp;&amp; ! is.eof()) {
<a name="l00160"></a>00160         is.get(c);
<a name="l00161"></a>00161         <span class="keywordflow">if</span> (ignore.find(c) == string::npos) <span class="keywordflow">break</span>;
<a name="l00162"></a>00162     }
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <span class="keywordflow">if</span> (is.good() &amp;&amp; ! is.eof()) {
<a name="l00165"></a>00165         token    = c;
<a name="l00166"></a>00166         sign     = c == <span class="charliteral">&#39;-&#39;</span> || c == <span class="charliteral">&#39;+&#39;</span>;
<a name="l00167"></a>00167         point    = c == <span class="charliteral">&#39;.&#39;</span>;
<a name="l00168"></a>00168         digit    = isdigit(c) != 0;
<a name="l00169"></a>00169         number   = digit || sign || point;
<a name="l00170"></a>00170         exp      = <span class="keyword">false</span>;
<a name="l00171"></a>00171         expsign  = <span class="keyword">false</span>;
<a name="l00172"></a>00172         expdigit = <span class="keyword">false</span>;
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         <span class="comment">// Get next character:</span>
<a name="l00175"></a>00175         <span class="keywordflow">while</span> (is.good() &amp;&amp; ! is.eof()) {
<a name="l00176"></a>00176             is.get(c);
<a name="l00177"></a>00177 
<a name="l00178"></a>00178             <span class="comment">// End of number reached?</span>
<a name="l00179"></a>00179             <span class="keywordflow">if</span> (number) {
<a name="l00180"></a>00180                 <span class="keywordflow">if</span> (! isdigit(c) &amp;&amp;
<a name="l00181"></a>00181                         c != <span class="charliteral">&#39;.&#39;</span> &amp;&amp;
<a name="l00182"></a>00182                         c != <span class="charliteral">&#39;-&#39;</span> &amp;&amp;
<a name="l00183"></a>00183                         c != <span class="charliteral">&#39;+&#39;</span> &amp;&amp;
<a name="l00184"></a>00184                         c != <span class="charliteral">&#39;e&#39;</span> &amp;&amp;
<a name="l00185"></a>00185                         c != <span class="charliteral">&#39;E&#39;</span>) {
<a name="l00186"></a>00186                     <span class="keywordflow">if</span> (digit)
<a name="l00187"></a>00187                         <span class="keywordflow">break</span>;
<a name="l00188"></a>00188                     <span class="keywordflow">else</span>
<a name="l00189"></a>00189                         number = <span class="keyword">false</span>;
<a name="l00190"></a>00190                 }
<a name="l00191"></a>00191             }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193             <span class="comment">// End of number reached?</span>
<a name="l00194"></a>00194             <span class="keywordflow">if</span> (number) {
<a name="l00195"></a>00195                 <span class="keywordflow">if</span> ((c == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; point) ||
<a name="l00196"></a>00196                         ((c == <span class="charliteral">&#39;e&#39;</span> || c == <span class="charliteral">&#39;E&#39;</span>) &amp;&amp; exp) ||
<a name="l00197"></a>00197                         ((c == <span class="charliteral">&#39;-&#39;</span> || c == <span class="charliteral">&#39;+&#39;</span>) &amp;&amp;
<a name="l00198"></a>00198                          (! exp || expsign || expdigit))) {
<a name="l00199"></a>00199                     <span class="keywordflow">if</span> (digit)
<a name="l00200"></a>00200                         <span class="keywordflow">break</span>;
<a name="l00201"></a>00201                     <span class="keywordflow">else</span>
<a name="l00202"></a>00202                         number = <span class="keyword">false</span>;
<a name="l00203"></a>00203                 }
<a name="l00204"></a>00204             }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206             <span class="comment">// Check for exponential part of number:</span>
<a name="l00207"></a>00207             <span class="keywordflow">if</span> (number) {
<a name="l00208"></a>00208                 digit    |= ! exp &amp;&amp; isdigit(c);
<a name="l00209"></a>00209                 exp      |= c == <span class="charliteral">&#39;e&#39;</span> || c == <span class="charliteral">&#39;E&#39;</span>;
<a name="l00210"></a>00210                 expsign  |= exp &amp;&amp; (c == <span class="charliteral">&#39;-&#39;</span> || c == <span class="charliteral">&#39;+&#39;</span>);
<a name="l00211"></a>00211                 expdigit |= exp &amp;&amp; isdigit(c);
<a name="l00212"></a>00212             }
<a name="l00213"></a>00213             <span class="keywordflow">else</span> {
<a name="l00214"></a>00214                 <span class="keywordflow">if</span> (count(tokenlist.begin(), tokenlist.end(), token) &gt; 0)
<a name="l00215"></a>00215                     <span class="keywordflow">break</span>;
<a name="l00216"></a>00216             }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218             token += c;
<a name="l00219"></a>00219         }
<a name="l00220"></a>00220 
<a name="l00221"></a>00221         is.putback(c);
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223 }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 
<a name="l00226"></a>00226 <span class="comment">//===================================================================</span>
<a name="l00409"></a><a class="code" href="_read_array_8cpp.html#aff3143e51aa23a9e3ea2360ca2051887">00409</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="_read_array_8cpp.html#aff3143e51aa23a9e3ea2360ca2051887" title="Reads the content for array &amp;quot;arr&amp;quot; from input stream &amp;quot;is&amp;quot;.">readArray</a>(<a class="code" href="class_array.html" title="This template class defines a data structure for general arrays of arbitrary types.">Array&lt; double &gt;</a>&amp; arr, istream&amp; is, <span class="keywordtype">bool</span> seek,
<a name="l00410"></a>00410               <span class="keyword">const</span> <span class="keywordtype">string</span> beginRecord,
<a name="l00411"></a>00411               <span class="keyword">const</span> <span class="keywordtype">string</span> endRecord,
<a name="l00412"></a>00412               <span class="keyword">const</span> <span class="keywordtype">string</span> beginComment,
<a name="l00413"></a>00413               <span class="keyword">const</span> <span class="keywordtype">string</span> endComment,
<a name="l00414"></a>00414               <span class="keyword">const</span> <span class="keywordtype">string</span> separator,
<a name="l00415"></a>00415               <span class="keyword">const</span> vector&lt; unsigned &gt; dimensions)
<a name="l00416"></a>00416 {
<a name="l00417"></a>00417 <span class="preprocessor">#ifdef _WIN32</span>
<a name="l00418"></a>00418 <span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> NotANumber  = numeric_limits&lt; double &gt;::quiet_NaN();
<a name="l00419"></a>00419     <span class="keyword">const</span> <span class="keywordtype">double</span> Infinity    = numeric_limits&lt; double &gt;::infinity();
<a name="l00420"></a>00420     <span class="keyword">const</span> <span class="keywordtype">double</span> NegInfinity = -Infinity;
<a name="l00421"></a>00421 <span class="preprocessor">#elif __SUNOS__</span>
<a name="l00422"></a>00422 <span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> NotANumber  = sqrt(-1.);
<a name="l00423"></a>00423     <span class="keyword">const</span> <span class="keywordtype">double</span> Infinity    = 1. / 0.;
<a name="l00424"></a>00424     <span class="keyword">const</span> <span class="keywordtype">double</span> NegInfinity = -1. / 0.;
<a name="l00425"></a>00425 <span class="preprocessor">#else</span>
<a name="l00426"></a>00426 <span class="preprocessor"></span>    <span class="comment">// &lt;awd, 2000-03-13&gt; assume ix86 architecture where HUGE_VAL is</span>
<a name="l00427"></a>00427     <span class="comment">// +infinity (thus, getting rid of annoying warnings about</span>
<a name="l00428"></a>00428     <span class="comment">// division by zero)</span>
<a name="l00429"></a>00429     <span class="keyword">const</span> <span class="keywordtype">double</span> NotANumber  = sqrt(-1.);
<a name="l00430"></a>00430     <span class="keyword">const</span> <span class="keywordtype">double</span> Infinity    = HUGE_VAL;
<a name="l00431"></a>00431     <span class="keyword">const</span> <span class="keywordtype">double</span> NegInfinity = -HUGE_VAL;
<a name="l00432"></a>00432 <span class="preprocessor">#endif</span>
<a name="l00433"></a>00433 <span class="preprocessor"></span>
<a name="l00434"></a>00434     <span class="keywordtype">string</span> token;
<a name="l00435"></a>00435     <span class="keywordtype">string</span> ignore;
<a name="l00436"></a>00436     <span class="keywordtype">string</span> delim;
<a name="l00437"></a>00437     list&lt; string &gt; tokens;
<a name="l00438"></a>00438 
<a name="l00439"></a>00439     <span class="comment">//=======================================================================</span>
<a name="l00440"></a>00440     <span class="comment">//</span>
<a name="l00441"></a>00441     <span class="comment">// token must not contain white space characters</span>
<a name="l00442"></a>00442     <span class="comment">//</span>
<a name="l00443"></a>00443     <span class="keywordflow">if</span> (beginRecord .find(<span class="charliteral">&#39; &#39;</span>) != string::npos ||
<a name="l00444"></a>00444             endRecord   .find(<span class="charliteral">&#39; &#39;</span>) != string::npos ||
<a name="l00445"></a>00445             beginComment.find(<span class="charliteral">&#39; &#39;</span>) != string::npos ||
<a name="l00446"></a>00446             endComment  .find(<span class="charliteral">&#39; &#39;</span>) != string::npos) {
<a name="l00447"></a>00447         cerr &lt;&lt; <span class="stringliteral">&quot;record and comment tokens must not contain white space chars\n&quot;</span>;
<a name="l00448"></a>00448         <span class="keywordflow">return</span> -2;
<a name="l00449"></a>00449     }
<a name="l00450"></a>00450 
<a name="l00451"></a>00451     <span class="comment">//=======================================================================</span>
<a name="l00452"></a>00452     <span class="comment">//</span>
<a name="l00453"></a>00453     <span class="comment">// if no dimensions are defined we need at least the end of record token</span>
<a name="l00454"></a>00454     <span class="comment">//</span>
<a name="l00455"></a>00455     <span class="keywordflow">if</span> (dimensions.size() == 0 &amp;&amp; endRecord.length() == 0) {
<a name="l00456"></a>00456         cerr &lt;&lt; <span class="stringliteral">&quot;end of record token is empty\n&quot;</span>;
<a name="l00457"></a>00457         <span class="keywordflow">return</span> -2;
<a name="l00458"></a>00458     }
<a name="l00459"></a>00459 
<a name="l00460"></a>00460     <span class="comment">//=======================================================================</span>
<a name="l00461"></a>00461     <span class="comment">//</span>
<a name="l00462"></a>00462     <span class="comment">// if begin of comment is defined we need the end of comment token</span>
<a name="l00463"></a>00463     <span class="comment">//</span>
<a name="l00464"></a>00464     <span class="keywordflow">if</span> (beginComment.length() &gt; 0 &amp;&amp; endComment.length() == 0) {
<a name="l00465"></a>00465         cerr &lt;&lt; <span class="stringliteral">&quot;end of comment token is empty\n&quot;</span>;
<a name="l00466"></a>00466         <span class="keywordflow">return</span> -2;
<a name="l00467"></a>00467     }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469     <span class="comment">//=======================================================================</span>
<a name="l00470"></a>00470     <span class="comment">//</span>
<a name="l00471"></a>00471     <span class="comment">// ignore the following characters</span>
<a name="l00472"></a>00472     <span class="comment">// only if they don&#39;t occur in any token)</span>
<a name="l00473"></a>00473     <span class="comment">// (except end of token which is handled separately)</span>
<a name="l00474"></a>00474     <span class="comment">//</span>
<a name="l00475"></a>00475     ignore = <span class="charliteral">&#39; &#39;</span>;
<a name="l00476"></a>00476     token = beginRecord + endRecord + beginComment + separator;
<a name="l00477"></a>00477     <span class="keywordflow">if</span> (token.find(<span class="charliteral">&#39;\t&#39;</span>) == string::npos) ignore += <span class="charliteral">&#39;\t&#39;</span>;
<a name="l00478"></a>00478     <span class="keywordflow">if</span> (token.find(<span class="charliteral">&#39;\r&#39;</span>) == string::npos) ignore += <span class="charliteral">&#39;\r&#39;</span>;
<a name="l00479"></a>00479     <span class="keywordflow">if</span> (token.find(<span class="charliteral">&#39;\n&#39;</span>) == string::npos) ignore += <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00480"></a>00480     <span class="keywordflow">if</span> (token.find(<span class="charliteral">&#39;\v&#39;</span>) == string::npos) ignore += <span class="charliteral">&#39;\v&#39;</span>;
<a name="l00481"></a>00481     <span class="keywordflow">if</span> (token.find(<span class="charliteral">&#39;\f&#39;</span>) == string::npos) ignore += <span class="charliteral">&#39;\f&#39;</span>;
<a name="l00482"></a>00482 
<a name="l00483"></a>00483     <span class="comment">//=======================================================================</span>
<a name="l00484"></a>00484     <span class="comment">//</span>
<a name="l00485"></a>00485     <span class="comment">// build list of used tokens (leave end of comment token out)</span>
<a name="l00486"></a>00486     <span class="comment">//</span>
<a name="l00487"></a>00487     <span class="keywordflow">if</span> (beginRecord .length() &gt; 0) tokens.push_back(beginRecord);
<a name="l00488"></a>00488     <span class="keywordflow">if</span> (endRecord   .length() &gt; 0) tokens.push_back(endRecord);
<a name="l00489"></a>00489     <span class="keywordflow">if</span> (beginComment.length() &gt; 0) tokens.push_back(beginComment);
<a name="l00490"></a>00490     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; separator.size(); i++)
<a name="l00491"></a>00491         <span class="keywordflow">if</span> (separator[ i ] != <span class="charliteral">&#39; &#39;</span>)
<a name="l00492"></a>00492             tokens.push_back(<span class="keywordtype">string</span>(1, separator[ i ]));
<a name="l00493"></a>00493 
<a name="l00494"></a>00494     <span class="comment">//=======================================================================</span>
<a name="l00495"></a>00495     <span class="comment">//</span>
<a name="l00496"></a>00496     <span class="comment">// add special tokens for NaN and Inf</span>
<a name="l00497"></a>00497     <span class="comment">//</span>
<a name="l00498"></a>00498     <span class="keywordflow">if</span> (count(tokens.begin(), tokens.end(), <span class="stringliteral">&quot;NaN&quot;</span>) +
<a name="l00499"></a>00499             count(tokens.begin(), tokens.end(), <span class="stringliteral">&quot;Inf&quot;</span>) +
<a name="l00500"></a>00500             count(tokens.begin(), tokens.end(), <span class="stringliteral">&quot;+Inf&quot;</span>) +
<a name="l00501"></a>00501             count(tokens.begin(), tokens.end(), <span class="stringliteral">&quot;-Inf&quot;</span>) &gt; 0) {
<a name="l00502"></a>00502         cerr &lt;&lt; <span class="stringliteral">&quot;tokens &#39;NaN&#39; and &#39;Inf&#39; are not allowed\n&quot;</span>;
<a name="l00503"></a>00503         <span class="keywordflow">return</span> -2;
<a name="l00504"></a>00504     }
<a name="l00505"></a>00505     tokens.push_back(<span class="stringliteral">&quot;NaN&quot;</span>);
<a name="l00506"></a>00506     tokens.push_back(<span class="stringliteral">&quot;Inf&quot;</span>);
<a name="l00507"></a>00507     tokens.push_back(<span class="stringliteral">&quot;+Inf&quot;</span>);
<a name="l00508"></a>00508     tokens.push_back(<span class="stringliteral">&quot;-Inf&quot;</span>);
<a name="l00509"></a>00509 
<a name="l00510"></a>00510     <span class="comment">//=======================================================================</span>
<a name="l00511"></a>00511     <span class="comment">//</span>
<a name="l00512"></a>00512     <span class="comment">// if seeking is allowed read the first line of the stream</span>
<a name="l00513"></a>00513     <span class="comment">//</span>
<a name="l00514"></a>00514     <span class="keywordflow">if</span> (seek) {
<a name="l00515"></a>00515         <span class="keywordtype">char</span> prefix[100];
<a name="l00516"></a>00516         streampos pos = is.tellg();
<a name="l00517"></a>00517         is.getline(prefix, <span class="keyword">sizeof</span>(prefix));
<a name="l00518"></a>00518         token = (string) prefix;
<a name="l00519"></a>00519         is.seekg(pos, ios::beg);
<a name="l00520"></a>00520     }
<a name="l00521"></a>00521     <span class="keywordflow">else</span>
<a name="l00522"></a>00522         token = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00523"></a>00523 
<a name="l00524"></a>00524     <span class="comment">//=======================================================================</span>
<a name="l00525"></a>00525     <span class="comment">//</span>
<a name="l00526"></a>00526     <span class="comment">// formatted input ? line begins with &quot;Array&lt; T &gt;( ... )&quot;</span>
<a name="l00527"></a>00527     <span class="comment">//</span>
<a name="l00528"></a>00528     <span class="keywordflow">if</span> (token.find(<span class="stringliteral">&quot;Array&lt;&quot;</span>) == 0) {
<a name="l00529"></a>00529         is &gt;&gt; arr;
<a name="l00530"></a>00530     }
<a name="l00531"></a>00531     <span class="comment">//=======================================================================</span>
<a name="l00532"></a>00532     <span class="comment">//</span>
<a name="l00533"></a>00533     <span class="comment">// dimension vector defined ?</span>
<a name="l00534"></a>00534     <span class="comment">//</span>
<a name="l00535"></a>00535     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dimensions.size() &gt; 0) {
<a name="l00536"></a>00536         <span class="comment">//===================================================================</span>
<a name="l00537"></a>00537         <span class="comment">//</span>
<a name="l00538"></a>00538         <span class="comment">// dimension totally fixed (0 serves as wildcard)</span>
<a name="l00539"></a>00539         <span class="comment">//</span>
<a name="l00540"></a>00540         <span class="keywordflow">if</span> (dimensions[ 0 ] &gt; 0) {
<a name="l00541"></a>00541             arr.<a class="code" href="group___resize.html#ga81723081da014a2dd76e141cea5302ee" title="Resizes an array to an one-dimensional array of size &amp;quot;i&amp;quot;.">resize</a>(dimensions);
<a name="l00542"></a>00542 
<a name="l00543"></a>00543             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0;
<a name="l00544"></a>00544                     i &lt; arr.<a class="code" href="group___information.html#gaea4c3d78720da121b10098b3a7fa29a7" title="Returns the total number of elements.">nelem</a>() &amp;&amp; is.good() &amp;&amp; ! is.eof();
<a name="l00545"></a>00545                     ++i) {
<a name="l00546"></a>00546                 <span class="comment">//</span>
<a name="l00547"></a>00547                 <span class="comment">// dimensions are fixed now,</span>
<a name="l00548"></a>00548                 <span class="comment">// ignore all begin/end of record and separator tokens</span>
<a name="l00549"></a>00549                 <span class="comment">//</span>
<a name="l00550"></a>00550                 <span class="keywordflow">do</span> {
<a name="l00551"></a>00551                     nexttoken(is, token, tokens, ignore);
<a name="l00552"></a>00552 
<a name="l00553"></a>00553                     <span class="comment">//</span>
<a name="l00554"></a>00554                     <span class="comment">// comment found ?</span>
<a name="l00555"></a>00555                     <span class="comment">//</span>
<a name="l00556"></a>00556                     <span class="keywordflow">if</span> (token == beginComment) {
<a name="l00557"></a>00557                         skipuntil(is, endComment);
<a name="l00558"></a>00558                         <span class="keywordflow">continue</span>;
<a name="l00559"></a>00559                     }
<a name="l00560"></a>00560                 }
<a name="l00561"></a>00561                 <span class="keywordflow">while</span> ((token == beginRecord || token == endRecord ||
<a name="l00562"></a>00562                         separator.find(token) != string::npos) &amp;&amp;
<a name="l00563"></a>00563                         is.good() &amp;&amp; ! is.eof());
<a name="l00564"></a>00564 
<a name="l00565"></a>00565                 <span class="comment">//</span>
<a name="l00566"></a>00566                 <span class="comment">// handle &#39;not a number&#39;s and infinite values</span>
<a name="l00567"></a>00567                 <span class="comment">//</span>
<a name="l00568"></a>00568                 <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;NaN&quot;</span>)
<a name="l00569"></a>00569                     arr.<a class="code" href="group___extract.html#gaeb42f164b911b56eabd558d8e647f9a6" title="Returns the i-th element of the arrays element vector Array::e.">elem</a>(i) = NotANumber;
<a name="l00570"></a>00570                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;Inf&quot;</span> || token == <span class="stringliteral">&quot;+Inf&quot;</span>)
<a name="l00571"></a>00571                     arr.<a class="code" href="group___extract.html#gaeb42f164b911b56eabd558d8e647f9a6" title="Returns the i-th element of the arrays element vector Array::e.">elem</a>(i) = Infinity;
<a name="l00572"></a>00572                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;-Inf&quot;</span>)
<a name="l00573"></a>00573                     arr.<a class="code" href="group___extract.html#gaeb42f164b911b56eabd558d8e647f9a6" title="Returns the i-th element of the arrays element vector Array::e.">elem</a>(i) = NegInfinity;
<a name="l00574"></a>00574                 <span class="keywordflow">else</span>
<a name="l00575"></a>00575                     arr.<a class="code" href="group___extract.html#gaeb42f164b911b56eabd558d8e647f9a6" title="Returns the i-th element of the arrays element vector Array::e.">elem</a>(i) = atof(token.c_str());
<a name="l00576"></a>00576             }
<a name="l00577"></a>00577         }
<a name="l00578"></a>00578         <span class="comment">//===================================================================</span>
<a name="l00579"></a>00579         <span class="comment">//</span>
<a name="l00580"></a>00580         <span class="comment">// dimension only partially fixed (dimension 0 undefined)</span>
<a name="l00581"></a>00581         <span class="comment">//</span>
<a name="l00582"></a>00582         <span class="keywordflow">else</span> {
<a name="l00583"></a>00583             <span class="keywordtype">unsigned</span> i, lastdim;
<a name="l00584"></a>00584             list&lt; double &gt; value;
<a name="l00585"></a>00585             list&lt; double &gt;::iterator li;
<a name="l00586"></a>00586             vector&lt; unsigned &gt; dim;
<a name="l00587"></a>00587 
<a name="l00588"></a>00588             <span class="keywordflow">while</span> (is.good() &amp;&amp; ! is.eof()) {
<a name="l00589"></a>00589                 <span class="comment">//</span>
<a name="l00590"></a>00590                 <span class="comment">// ignore all begin/end of record and separator tokens</span>
<a name="l00591"></a>00591                 <span class="comment">//</span>
<a name="l00592"></a>00592                 <span class="keywordflow">do</span> {
<a name="l00593"></a>00593                     nexttoken(is, token, tokens, ignore);
<a name="l00594"></a>00594 
<a name="l00595"></a>00595                     <span class="comment">//</span>
<a name="l00596"></a>00596                     <span class="comment">// comment found ?</span>
<a name="l00597"></a>00597                     <span class="comment">//</span>
<a name="l00598"></a>00598                     <span class="keywordflow">if</span> (token == beginComment) {
<a name="l00599"></a>00599                         skipuntil(is, endComment);
<a name="l00600"></a>00600                         <span class="keywordflow">continue</span>;
<a name="l00601"></a>00601                     }
<a name="l00602"></a>00602                 }
<a name="l00603"></a>00603                 <span class="keywordflow">while</span> ((token == beginRecord || token == endRecord ||
<a name="l00604"></a>00604                         separator.find(token) != string::npos) &amp;&amp;
<a name="l00605"></a>00605                         is.good() &amp;&amp; ! is.eof());
<a name="l00606"></a>00606 
<a name="l00607"></a>00607                 <span class="keywordflow">if</span> (is.good() &amp;&amp; ! is.eof()) {
<a name="l00608"></a>00608                     <span class="comment">//</span>
<a name="l00609"></a>00609                     <span class="comment">// handle &#39;not a number&#39;s and infinite values</span>
<a name="l00610"></a>00610                     <span class="comment">//</span>
<a name="l00611"></a>00611                     <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;NaN&quot;</span>)
<a name="l00612"></a>00612                         value.push_back(NotANumber);
<a name="l00613"></a>00613                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;Inf&quot;</span> || token == <span class="stringliteral">&quot;+Inf&quot;</span>)
<a name="l00614"></a>00614                         value.push_back(Infinity);
<a name="l00615"></a>00615                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;-Inf&quot;</span>)
<a name="l00616"></a>00616                         value.push_back(NegInfinity);
<a name="l00617"></a>00617                     <span class="keywordflow">else</span>
<a name="l00618"></a>00618                         value.push_back(atof(token.c_str()));
<a name="l00619"></a>00619                 }
<a name="l00620"></a>00620             }
<a name="l00621"></a>00621 
<a name="l00622"></a>00622             lastdim = value.size();
<a name="l00623"></a>00623             <span class="keywordflow">for</span> (i = 1; i &lt; dimensions.size(); ++i)
<a name="l00624"></a>00624                 lastdim /= dimensions[ i ];
<a name="l00625"></a>00625 
<a name="l00626"></a>00626             dim = dimensions;
<a name="l00627"></a>00627             dim[ 0 ] = lastdim;
<a name="l00628"></a>00628 
<a name="l00629"></a>00629             <span class="comment">//</span>
<a name="l00630"></a>00630             <span class="comment">// copy found values to the Array</span>
<a name="l00631"></a>00631             <span class="comment">//</span>
<a name="l00632"></a>00632             arr.<a class="code" href="group___resize.html#ga81723081da014a2dd76e141cea5302ee" title="Resizes an array to an one-dimensional array of size &amp;quot;i&amp;quot;.">resize</a>(dim);
<a name="l00633"></a>00633             <span class="keywordflow">for</span> (i = 0, li = value.begin();
<a name="l00634"></a>00634                     i &lt; arr.<a class="code" href="group___information.html#gaea4c3d78720da121b10098b3a7fa29a7" title="Returns the total number of elements.">nelem</a>() &amp;&amp; li != value.end();
<a name="l00635"></a>00635                     ++i, ++li)
<a name="l00636"></a>00636                 arr.<a class="code" href="group___extract.html#gaeb42f164b911b56eabd558d8e647f9a6" title="Returns the i-th element of the arrays element vector Array::e.">elem</a>(i) = *li;
<a name="l00637"></a>00637         }
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639     <span class="comment">//=======================================================================</span>
<a name="l00640"></a>00640     <span class="comment">//</span>
<a name="l00641"></a>00641     <span class="comment">// else unformatted input</span>
<a name="l00642"></a>00642     <span class="comment">//</span>
<a name="l00643"></a>00643     <span class="keywordflow">else</span> {
<a name="l00644"></a>00644         <span class="keywordtype">bool</span> lastsep;
<a name="l00645"></a>00645         <span class="keywordtype">bool</span> expectval;
<a name="l00646"></a>00646         <span class="keywordtype">bool</span> blanksep;
<a name="l00647"></a>00647         <span class="keywordtype">unsigned</span> i, depth, end, lastdim;
<a name="l00648"></a>00648         <span class="keywordtype">double</span> missing = HUGE_VAL;
<a name="l00649"></a>00649         list&lt; double &gt; value;
<a name="l00650"></a>00650         list&lt; double &gt;::iterator li;
<a name="l00651"></a>00651         vector&lt; unsigned &gt; dim;
<a name="l00652"></a>00652         <span class="comment">// contains the number of values per dimension:</span>
<a name="l00653"></a>00653         vector&lt; unsigned &gt; stack;
<a name="l00654"></a>00654 
<a name="l00655"></a>00655         lastsep   = <span class="keyword">true</span>;
<a name="l00656"></a>00656         blanksep  = separator.length() == 0 ||
<a name="l00657"></a>00657                     separator.find(<span class="charliteral">&#39; &#39;</span>) != string::npos;
<a name="l00658"></a>00658         expectval = blanksep || beginRecord.length() == 0;
<a name="l00659"></a>00659         <span class="comment">// no. of begin records that were not ended yet:</span>
<a name="l00660"></a>00660         depth     = 0;
<a name="l00661"></a>00661         <span class="comment">// end of stack:</span>
<a name="l00662"></a>00662         end       = 0;
<a name="l00663"></a>00663         stack.push_back(0);
<a name="l00664"></a>00664 
<a name="l00665"></a>00665         <span class="keywordflow">while</span> (is.good() &amp;&amp; ! is.eof()) {
<a name="l00666"></a>00666             nexttoken(is, token, tokens, ignore);
<a name="l00667"></a>00667 
<a name="l00668"></a>00668             <span class="comment">//</span>
<a name="l00669"></a>00669             <span class="comment">// comment found ?</span>
<a name="l00670"></a>00670             <span class="comment">//</span>
<a name="l00671"></a>00671             <span class="keywordflow">if</span> (token == beginComment) {
<a name="l00672"></a>00672                 skipuntil(is, endComment);
<a name="l00673"></a>00673                 <span class="keywordflow">continue</span>;
<a name="l00674"></a>00674             }
<a name="l00675"></a>00675 
<a name="l00676"></a>00676             <span class="keywordflow">if</span> (is.good() &amp;&amp; ! is.eof()) {
<a name="l00677"></a>00677                 <span class="comment">// begin of new record</span>
<a name="l00678"></a>00678                 <span class="keywordflow">if</span> (beginRecord.length() &gt; 0 &amp;&amp; token == beginRecord) {
<a name="l00679"></a>00679                     depth++;
<a name="l00680"></a>00680                     lastsep = expectval = <span class="keyword">true</span>;
<a name="l00681"></a>00681                     <span class="comment">// end of current record</span>
<a name="l00682"></a>00682                 }
<a name="l00683"></a>00683                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == endRecord) {
<a name="l00684"></a>00684                     <span class="keywordflow">if</span> (lastsep &amp;&amp; stack[ 0 ] &gt; 0) {
<a name="l00685"></a>00685                         value.push_back(missing);
<a name="l00686"></a>00686                         stack[ end = 0 ]++;
<a name="l00687"></a>00687                     }
<a name="l00688"></a>00688                     lastsep = <span class="keyword">false</span>;
<a name="l00689"></a>00689                     <span class="keywordflow">if</span> (beginRecord.length() &gt; 0) {
<a name="l00690"></a>00690                         <span class="comment">// end of record with missing begin of record?</span>
<a name="l00691"></a>00691                         <span class="keywordflow">if</span> (depth == 0) {
<a name="l00692"></a>00692                             cerr &lt;&lt; <span class="stringliteral">&quot;unbalanced end of record token\n&quot;</span>;
<a name="l00693"></a>00693                             <span class="keywordflow">return</span> -1;
<a name="l00694"></a>00694                         }
<a name="l00695"></a>00695                         <span class="comment">// end of current record</span>
<a name="l00696"></a>00696                         depth--;
<a name="l00697"></a>00697                     }
<a name="l00698"></a>00698                     <span class="comment">// new dimension found?</span>
<a name="l00699"></a>00699                     <span class="keywordflow">if</span> (end &gt;= dim.size())
<a name="l00700"></a>00700                         dim.push_back(stack[ end ]);
<a name="l00701"></a>00701                     <span class="keywordflow">else</span> {
<a name="l00702"></a>00702                         <span class="keywordflow">if</span> (stack[ end ] != dim[ end ]) {
<a name="l00703"></a>00703                             cerr &lt;&lt; <span class="stringliteral">&quot;dimensions do not match\n&quot;</span>;
<a name="l00704"></a>00704                             <span class="keywordflow">return</span> -1;
<a name="l00705"></a>00705                         }
<a name="l00706"></a>00706                     }
<a name="l00707"></a>00707                     stack[ end++ ] = 0;
<a name="l00708"></a>00708                     <span class="keywordflow">if</span> (end &gt;= stack.size())
<a name="l00709"></a>00709                         stack.push_back(0);
<a name="l00710"></a>00710                     stack[ end ]++;
<a name="l00711"></a>00711                     expectval = blanksep;
<a name="l00712"></a>00712                     <span class="comment">// separator found</span>
<a name="l00713"></a>00713                 }
<a name="l00714"></a>00714                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (separator.find(token) != string::npos) {
<a name="l00715"></a>00715                     <span class="keywordflow">if</span> (lastsep) {
<a name="l00716"></a>00716                         value.push_back(missing);
<a name="l00717"></a>00717                         stack[ end = 0 ]++;
<a name="l00718"></a>00718                     }
<a name="l00719"></a>00719                     lastsep = expectval = <span class="keyword">true</span>;
<a name="l00720"></a>00720                     <span class="comment">// array value</span>
<a name="l00721"></a>00721                 }
<a name="l00722"></a>00722                 <span class="keywordflow">else</span> {
<a name="l00723"></a>00723                     <span class="keywordflow">if</span> (! expectval) {
<a name="l00724"></a>00724                         cerr &lt;&lt; <span class="stringliteral">&quot;unexpected value\n&quot;</span>;
<a name="l00725"></a>00725                         <span class="keywordflow">return</span> -1;
<a name="l00726"></a>00726                     }
<a name="l00727"></a>00727 
<a name="l00728"></a>00728                     <span class="comment">//</span>
<a name="l00729"></a>00729                     <span class="comment">// handle &#39;not a number&#39;s and infinite values</span>
<a name="l00730"></a>00730                     <span class="comment">//</span>
<a name="l00731"></a>00731                     <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;NaN&quot;</span>)
<a name="l00732"></a>00732                         value.push_back(NotANumber);
<a name="l00733"></a>00733                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;Inf&quot;</span> || token == <span class="stringliteral">&quot;+Inf&quot;</span>)
<a name="l00734"></a>00734                         value.push_back(Infinity);
<a name="l00735"></a>00735                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;-Inf&quot;</span>)
<a name="l00736"></a>00736                         value.push_back(NegInfinity);
<a name="l00737"></a>00737                     <span class="keywordflow">else</span>
<a name="l00738"></a>00738                         value.push_back(atof(token.c_str()));
<a name="l00739"></a>00739 
<a name="l00740"></a>00740                     stack[ end = 0 ]++;
<a name="l00741"></a>00741                     lastsep = <span class="keyword">false</span>;
<a name="l00742"></a>00742                     expectval = blanksep;
<a name="l00743"></a>00743                 }
<a name="l00744"></a>00744             }
<a name="l00745"></a>00745         }
<a name="l00746"></a>00746 
<a name="l00747"></a>00747         <span class="comment">//</span>
<a name="l00748"></a>00748         <span class="comment">// append missing sizes</span>
<a name="l00749"></a>00749         <span class="comment">//</span>
<a name="l00750"></a>00750         <span class="keywordflow">if</span> (stack.size() &gt; dim.size())
<a name="l00751"></a>00751             dim.insert(dim.end(),
<a name="l00752"></a>00752                        stack.begin() + dim.size(),
<a name="l00753"></a>00753                        stack.end());
<a name="l00754"></a>00754 
<a name="l00755"></a>00755         <span class="comment">//</span>
<a name="l00756"></a>00756         <span class="comment">// check if dimensions are consistent</span>
<a name="l00757"></a>00757         <span class="comment">//</span>
<a name="l00758"></a>00758         <span class="keywordflow">if</span> (beginRecord.length() &gt; 0 &amp;&amp; depth &gt; 0) {
<a name="l00759"></a>00759             cerr &lt;&lt; <span class="stringliteral">&quot;missing end of record token\n&quot;</span>;
<a name="l00760"></a>00760             <span class="keywordflow">return</span> -1;
<a name="l00761"></a>00761         }
<a name="l00762"></a>00762         lastdim = value.size();
<a name="l00763"></a>00763         <span class="keywordflow">for</span> (i = 0; i &lt; dim.size() - 1; ++i)
<a name="l00764"></a>00764             lastdim /= dim[ i ];
<a name="l00765"></a>00765 
<a name="l00766"></a>00766         <span class="keywordflow">if</span> (dim[ dim.size() - 1 ] != lastdim) {
<a name="l00767"></a>00767             <span class="comment">//</span>
<a name="l00768"></a>00768             <span class="comment">// if end of record token is newline append missing dimensions</span>
<a name="l00769"></a>00769             <span class="comment">// silently</span>
<a name="l00770"></a>00770             <span class="comment">//</span>
<a name="l00771"></a>00771             <span class="keywordflow">if</span> (endRecord == <span class="stringliteral">&quot;\n&quot;</span>)
<a name="l00772"></a>00772                 dim[ dim.size() - 1 ] = lastdim;
<a name="l00773"></a>00773             <span class="keywordflow">else</span> {
<a name="l00774"></a>00774                 cerr &lt;&lt; <span class="stringliteral">&quot;missing end of record token\n&quot;</span>;
<a name="l00775"></a>00775                 <span class="keywordflow">return</span> -1;
<a name="l00776"></a>00776             }
<a name="l00777"></a>00777         }
<a name="l00778"></a>00778 
<a name="l00779"></a>00779         <span class="comment">//</span>
<a name="l00780"></a>00780         <span class="comment">// copy found values to the Array</span>
<a name="l00781"></a>00781         <span class="comment">//</span>
<a name="l00782"></a>00782         reverse(dim.begin(), dim.end());
<a name="l00783"></a>00783         arr.<a class="code" href="group___resize.html#ga81723081da014a2dd76e141cea5302ee" title="Resizes an array to an one-dimensional array of size &amp;quot;i&amp;quot;.">resize</a>(dim);
<a name="l00784"></a>00784         <span class="keywordflow">if</span> (value.size() != arr.<a class="code" href="group___information.html#gaea4c3d78720da121b10098b3a7fa29a7" title="Returns the total number of elements.">nelem</a>()) {
<a name="l00785"></a>00785             cerr &lt;&lt; <span class="stringliteral">&quot;Array dimensions are corrupted\n&quot;</span>;
<a name="l00786"></a>00786             <span class="keywordflow">return</span> -1;
<a name="l00787"></a>00787         }
<a name="l00788"></a>00788         <span class="keywordflow">for</span> (i = 0, li = value.begin(); li != value.end(); ++i, ++li)
<a name="l00789"></a>00789             arr.<a class="code" href="group___extract.html#gaeb42f164b911b56eabd558d8e647f9a6" title="Returns the i-th element of the arrays element vector Array::e.">elem</a>(i) = *li;
<a name="l00790"></a>00790     }
<a name="l00791"></a>00791     <span class="comment">//=======================================================================</span>
<a name="l00792"></a>00792 
<a name="l00793"></a>00793     <span class="keywordflow">if</span> (! is.eof() &amp;&amp; ! is.good()) {
<a name="l00794"></a>00794         cerr &lt;&lt; <span class="stringliteral">&quot;invalid stream operation\n&quot;</span>;
<a name="l00795"></a>00795         <span class="keywordflow">return</span> -1;
<a name="l00796"></a>00796     }
<a name="l00797"></a>00797 
<a name="l00798"></a>00798     <span class="keywordflow">return</span> 0;
<a name="l00799"></a>00799 }
<a name="l00800"></a>00800 
<a name="l00801"></a>00801 
</pre></div></div>
</div>
</div>
</div>
</body></html>
